import{r as o,o as c,c as l,b as n,d as t,F as i,e as s,a}from"./app.ee3fc36b.js";import{_ as r}from"./plugin-vue_export-helper.21dcd24c.js";const u={},d=n("h1",{id:"rollup\u8F93\u51FA\u683C\u5F0F",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#rollup\u8F93\u51FA\u683C\u5F0F","aria-hidden":"true"},"#"),s(" rollup\u8F93\u51FA\u683C\u5F0F")],-1),k=n("blockquote",null,[n("p",null,[n("code",null,"vite.js"),s(" \u6784\u5EFA\u7684\u6838\u5FC3\u662F "),n("code",null,"rollup.js"),s("\u3002")])],-1),m=n("h2",{id:"demo\u4E0E\u793A\u4F8B\u6784\u5EFA",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#demo\u4E0E\u793A\u4F8B\u6784\u5EFA","aria-hidden":"true"},"#"),s(" DEMO\u4E0E\u793A\u4F8B\u6784\u5EFA")],-1),b=s("demo \u5730\u5740\uFF1A"),h={href:"https://github.com/sykinggg/rollup-demos/tree/master/js-modules",target:"_blank",rel:"noopener noreferrer"},g=s("https://github.com/sykinggg/rollup-demos/tree/master/js-modules"),w=a(`<p>demo \u7684\u4EE3\u7801\u7ED3\u6784\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>\u251C\u2500\u2500 answer.js
\u251C\u2500\u2500 index.js
\u251C\u2500\u2500 out
\u251C\u2500\u2500 package.json
\u251C\u2500\u2500 rollup.config.js
\u2514\u2500\u2500 yarn.lock
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>\u5176\u4E2D <code>index.js</code> \u548C <code>answer.js</code> \u5C5E\u4E8E\u4E1A\u52A1\u4EE3\u7801\uFF0C\u662F\u9700\u8981\u88AB\u6253\u5305\u7684\u5BF9\u8C61\u3002\u5728 <code>index.js</code> \u4E2D\u4F9D\u8D56\u4E86 <code>answer.js</code>\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// answer.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token number">42</span>

<span class="token comment">// index.js</span>
<span class="token keyword">import</span> answer <span class="token keyword">from</span> <span class="token string">&quot;./answer&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> repeat <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;lodash&#39;</span>
<span class="token comment">// \u5B9A\u4E49\u4E00\u4E2A\u65E0\u7528\u53D8\u91CF, \u6D4B\u8BD5 tree-shaking</span>
<span class="token keyword">const</span> unusedVar <span class="token operator">=</span> <span class="token string">&#39;May the 4th&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">printAnswer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u6253\u5370</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">the answer is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>answer<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
  <span class="token comment">// \u6D4B\u8BD5 lodash \u7684\u80FD\u529B\uFF0C\u6253\u537042\u4E2A1</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span> answer<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><code>rollup.config.js</code> \u662F <code>rollup</code> \u7684\u914D\u7F6E\u6587\u4EF6\uFF0C\u5728\u6B64\u6587\u4EF6\u4E2D\u6211\u4EEC\u5206\u522B\u6307\u5B9A\u5176\u8F93\u51FA <code>amd</code> , <code>cjs</code> , <code>esm</code> , <code>iife</code> , <code>umd</code> , <code>system</code> \u516D\u79CD\u683C\u5F0F\u7684\u6587\u4EF6\u3002</p><p>\u8F93\u51FA\u7684\u6587\u4EF6\u4F1A\u88AB\u6253\u5305\u5230 <code>out</code> \u6587\u4EF6\u5939\u4E0B\u3002</p><p>\u5F53\u6211\u4EEC\u6267\u884C <code>yarn build</code> \u6216\u8005 <code>npm build</code> \u4E4B\u540E\uFF0C\u4F1A\u5728 <code>out</code> \u4E0B\u4EA7\u751F\u5982\u4E0B\u683C\u5F0F\u7684\u4EE3\u7801\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>\u251C\u2500\u2500 out
\u2502   \u251C\u2500\u2500 amd
\u2502   \u2502   \u2514\u2500\u2500 bundle.js
\u2502   \u251C\u2500\u2500 cjs
\u2502   \u2502   \u2514\u2500\u2500 bundle.js
\u2502   \u251C\u2500\u2500 ems
\u2502   \u2502   \u2514\u2500\u2500 bundle.js
\u2502   \u251C\u2500\u2500 iife
\u2502   \u2502   \u2514\u2500\u2500 bundle.js
\u2502   \u251C\u2500\u2500 system
\u2502   \u2502   \u2514\u2500\u2500 bundle.js
\u2502   \u2514\u2500\u2500 umd
\u2502       \u2514\u2500\u2500 bundle.js
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="\u4E00\u3001iife-\u81EA\u6267\u884C\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001iife-\u81EA\u6267\u884C\u51FD\u6570" aria-hidden="true">#</a> \u4E00\u3001IIFE \u81EA\u6267\u884C\u51FD\u6570</h2><blockquote><p>IIFE \u7684\u5168\u79F0\u662F \u201Cimmediately invoked function expression\u201D\u3002</p></blockquote><h3 id="_1-1-\u6253\u5305\u7ED3\u679C\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#_1-1-\u6253\u5305\u7ED3\u679C\u5206\u6790" aria-hidden="true">#</a> 1.1 \u6253\u5305\u7ED3\u679C\u5206\u6790</h3><p>\u8BA9\u6211\u4EEC\u5148\u770B\u770B\u672C <code>demo</code> \u7684 <code>iife</code> \u683C\u5F0F\u6253\u51FA\u6765\u7684\u5305\u957F\u4EC0\u4E48\u6837\u3002</p>`,12),v=["src"],f=a(`<p>\u5BF9\u4E0A\u8FF0\u4EE3\u7801\u505A\u4E00\u4E9B\u7B80\u5316\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> Test <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">exports<span class="token punctuation">,</span> lodash</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token string">&#39;use strict&#39;</span><span class="token punctuation">;</span> <span class="token comment">// \u81EA\u5E26\u4E25\u683C\u6A21\u5F0F\uFF0C\u907F\u514D\u4E00\u4E9B\u5947\u602A\u7684\u517C\u5BB9\u6027\u95EE\u9898</span>

  <span class="token doc-comment comment">/**
   * \u4E0B\u9762\u6298\u884C\u65E0\u7528\u4EE3\u7801\u88AB tree-shaking \u6389\u4E86
   * const unusedVar = &#39;May the 4th&#39;
   * */</span>

  <span class="token keyword">var</span> answer <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span> <span class="token comment">// \u4E1A\u52A1\u4E2D\u88AB\u5355\u4E00\u5F15\u7528\u7684\u6A21\u5757\uFF0C\u88AB\u76F4\u63A5\u62B9\u5E73\u4E86</span>

  <span class="token keyword">const</span> <span class="token function-variable function">printAnswer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">the answer is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>answer<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lodash<span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span> answer<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  exports<span class="token punctuation">.</span>printAnswer <span class="token operator">=</span> printAnswer<span class="token punctuation">;</span> <span class="token comment">// \u628A\u8981export\u7684\u5C5E\u6027\u6302\u5728\u5230exports\u4E0A</span>

  <span class="token keyword">return</span> exports<span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> $<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// exports\u662F\u7B2C\u4E00\u4E2A\u5165\u53C2\uFF0C\u4F9D\u8D56\u7684jquery\u662F\u7B2C\u4E8C\u4E2A\u5165\u53C2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p><code>IIFE</code> \u662F\u524D\u7AEF\u6A21\u5757\u5316\u65E9\u671F\u7684\u4EA7\u7269\uFF0C\u5B83\u7684\u6838\u5FC3\u601D\u8DEF\u662F:</p><ol><li><p>\u6784\u5EFA\u4E00\u4E2A\u533F\u540D\u51FD\u6570</p></li><li><p>\u7ACB\u523B\u6267\u884C\u8FD9\u4E2A\u533F\u540D\u51FD\u6570\uFF0C\u5BF9\u5916\u90E8\u7684\u4F9D\u8D56\u901A\u8FC7\u5165\u53C2\u7684\u5F62\u5F0F\u4F20\u5165</p></li><li><p>\u8FD4\u56DE\u8BE5\u6A21\u5757\u7684\u8F93\u51FA</p></li></ol><h3 id="_1-2-\u5982\u4F55\u8FD0\u884C" tabindex="-1"><a class="header-anchor" href="#_1-2-\u5982\u4F55\u8FD0\u884C" aria-hidden="true">#</a> 1.2 \u5982\u4F55\u8FD0\u884C</h3><p><code>IIFE</code> \u7684\u8FD0\u884C\u5176\u5B9E\u5F88\u5BB9\u6613\uFF0C\u5982\u679C\u5B83\u6CA1\u6709\u5176\u4ED6\u4F9D\u8D56\uFF0C\u53EA\u9700\u8981\u53BB\u5F15\u5165\u6587\u4EF6\uFF0C\u7136\u540E\u5728 <code>window</code> \u4E0A\u53D6\u76F8\u5E94\u7684\u53D8\u91CF\u5373\u53EF\u3002</p><p>\u5982\uFF1A</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://cdn.bootcss.com/jquery/3.3.1/jquery.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"> 
   <span class="token comment">// jquery \u5C31\u662F\u5178\u578B\u7684\u81EA\u6267\u884C\u51FD\u6570\u6A21\u5F0F\uFF0C\u5F53\u4F60\u5F15\u5165\u540E\uFF0C\u4ED6\u5C31\u4F1A\u6302\u5728\u5230 window.$ \u4E0A</span>
   window<span class="token punctuation">.</span>$ <span class="token comment">// \u8FD9\u6837\u5C31\u80FD\u53D6\u5230 jquery \u4E86</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u4F46\u662F\u5982\u679C\u4F60\u50CF\u672C <code>demo</code> \u4E2D\u90A3\u6837\u4F9D\u8D56\u4E86\u5176\u4ED6\u7684\u6A21\u5757\uFF0C\u90A3\u4F60\u5C31\u5FC5\u987B\u4FDD\u8BC1\u4EE5\u4E0B\u4E24\u70B9\u624D\u80FD\u6B63\u5E38\u8FD0\u884C\uFF1A</p><ol><li><p>\u6B64\u5305\u6240\u4F9D\u8D56\u7684\u5305\uFF0C\u5DF2\u5728\u6B64\u5305\u4E4B\u524D\u5B8C\u6210\u52A0\u8F7D\u3002</p></li><li><p>\u524D\u7F6E\u4F9D\u8D56\u7684\u5305\uFF0C\u548C <code>IIFE</code> \u53EA\u6267\u884C\u5165\u53C2\u7684\u53D8\u91CF\u547D\u540D\u662F\u4E00\u81F4\u7684\u3002</p></li></ol><p>\u4EE5\u672C <code>demo</code> \u7684 <code>IIFE</code> \u6784\u5EFA\u7ED3\u679C\u4E3A\u4F8B\uFF1A</p><ol><li><p>\u5B83\u524D\u7F6E\u4F9D\u8D56\u4E86 <code>lodash</code>\uFF0C\u56E0\u6B64\u9700\u8981\u5728\u5B83\u52A0\u8F7D\u4E4B\u524D\u5B8C\u6210 <code>lodash</code> \u7684\u52A0\u8F7D\u3002</p></li><li><p>\u6B64 <code>IIFE</code> \u7684\u7B2C\u4E8C\u4E2A\u5165\u53C2\u662F <code>lodash</code>\uFF0C\u4F5C\u4E3A\u524D\u7F6E\u6761\u4EF6\uFF0C\u6211\u4EEC\u9700\u8981\u8BA9 <code>window.lodash</code> \u4E5F\u6307\u5411 <code>lodash</code>\u3002</p></li></ol><p>\u56E0\u6B64\uFF0C\u8FD0\u884C\u65F6\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.bootcdn.net/ajax/libs/lodash.js/4.17.21/lodash.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">window<span class="token punctuation">.</span>lodash <span class="token operator">=</span> window<span class="token punctuation">.</span>_</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    window<span class="token punctuation">.</span>Test<span class="token punctuation">.</span><span class="token function">printAnswer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_1-3-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_1-3-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 1.3 \u4F18\u7F3A\u70B9</h3><ul><li><p>\u4F18\u70B9:</p><ol><li><p>\u901A\u8FC7\u95ED\u5305\u8425\u9020\u4E86\u4E00\u4E2A\u201C\u79C1\u6709\u201D\u547D\u540D\u7A7A\u95F4\uFF0C\u9632\u6B62\u5F71\u54CD\u5168\u5C40\uFF0C\u5E76\u9632\u6B62\u88AB\u4ECE\u5916\u90E8\u4FEE\u6539\u79C1\u6709\u53D8\u91CF\u3002</p></li><li><p>\u7B80\u5355\u6613\u61C2</p></li><li><p>\u5BF9\u4EE3\u7801\u4F53\u79EF\u7684\u5F71\u54CD\u4E0D\u5927</p></li></ol></li><li><p>\u7F3A\u70B9\uFF1A</p><ol><li><p>\u8F93\u51FA\u7684\u53D8\u91CF\u53EF\u80FD\u5F71\u54CD\u5168\u5C40\u53D8\u91CF\uFF1B\u5F15\u5165\u4F9D\u8D56\u5305\u65F6\u4F9D\u8D56\u5168\u5C40\u53D8\u91CF\u3002</p></li><li><p>\u9700\u8981\u4F7F\u7528\u8005\u81EA\u884C\u7EF4\u62A4 <code>script</code> \u6807\u7B7E\u7684\u52A0\u8F7D\u987A\u5E8F\u3002</p></li></ol></li></ul><p>\u4F18\u70B9\u5C31\u4E0D\u7EC6\u8BF4\u4E86\uFF0C\u7F3A\u70B9\u8BE6\u7EC6\u89E3\u91CA\u4E00\u4E0B\u3002</p><p><strong>\u7F3A\u70B9\u4E00\uFF1A\u8F93\u51FA\u7684\u53D8\u91CF\u53EF\u80FD\u5F71\u54CD\u5168\u5C40\u53D8\u91CF\uFF1B\u5F15\u5165\u4F9D\u8D56\u5305\u65F6\u4F9D\u8D56\u5168\u5C40\u53D8\u91CF\u3002</strong></p><p>\u524D\u534A\u53E5\uFF1A<strong>\u8F93\u51FA\u7684\u53D8\u91CF\u53EF\u80FD\u5F71\u54CD\u5168\u5C40\u53D8\u91CF;</strong> \u5176\u5B9E\u5F88\u597D\u7406\u89E3\uFF0C\u4EE5\u4E0A\u9762 <code>demo</code> \u7684\u8F93\u51FA\u4E3A\u4F8B\uFF1A <code>window.Test</code> \u5C31\u5DF2\u7ECF\u88AB\u5F71\u54CD\u4E86\u3002\u8FD9\u79CD\u660E\u663E\u7684\u526F\u4F5C\u7528\u5728\u7A0B\u5E8F\u4E2D\u5176\u5B9E\u662F\u6709\u9690\u60A3\u7684\u3002</p><p>\u540E\u534A\u53E5\uFF1A<strong>\u5F15\u5165\u4F9D\u8D56\u5305\u65F6\u4F9D\u8D56\u5168\u5C40\u53D8\u91CF\uFF1B</strong> \u6211\u4EEC\u4E3A\u4E86\u8BA9 <code>demo</code> \u6B63\u5E38\u8FD0\u884C\uFF0C\u56E0\u6B64\u52A0\u4E86\u4E00\u884C\u4EE3\u7801\u8BA9 <code>window.lodash</code> \u4E5F\u6307\u5411 <code>lodash</code>\uFF0C\u4F46\u5B83\u786E\u5B9E\u662F\u592A\u8106\u5F31\u4E86\u3002</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- \u6CA1\u6709\u8FD9\u4E00\u884C\uFF0Cdemo\u5C31\u65E0\u6CD5\u6B63\u5E38\u8FD0\u884C --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">window<span class="token punctuation">.</span>lodash <span class="token operator">=</span> window<span class="token punctuation">.</span>_</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>IIFE</code> \u7684\u6267\u884C\u5BF9\u73AF\u5883\u7684\u4F9D\u8D56\u662F\u82DB\u523B\u7684\uFF0C\u9664\u975E\u5B83\u5B8C\u5168\u4E0D\u4F9D\u8D56\u5916\u90E8\u5305\u3002\uFF08Jquery\uFF01\uFF09</p><p>\u867D\u7136 <code>IIFE</code> \u7684\u7F3A\u70B9\u5F88\u591A\uFF0C\u4F46\u5E76\u4E0D\u59A8\u788D\u5B83\u5728 <code>Jquery</code> \u65F6\u4EE3\u6781\u5927\u5730\u63A8\u52A8\u4E86 <code>web</code> \u5F00\u53D1\u7684\u8FDB\u7A0B\uFF0C\u56E0\u4E3A\u5B83\u786E\u5B9E\u89E3\u51B3\u4E86 <code>js</code> \u672C\u8EAB\u5B58\u5728\u7684\u5F88\u591A\u95EE\u9898\u3002</p><h2 id="\u4E8C\u3001commonjs" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001commonjs" aria-hidden="true">#</a> \u4E8C\u3001CommonJS</h2><h3 id="_2-1-\u5206\u6790\u6253\u5305\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_2-1-\u5206\u6790\u6253\u5305\u7ED3\u679C" aria-hidden="true">#</a> 2.1 \u5206\u6790\u6253\u5305\u7ED3\u679C</h3><p>\u5148\u770B\u770B <code>CommonJs</code> \u6253\u5305\u7684\u7ED3\u679C:</p>`,26),j=["src"],_=a(`<p>\u7B80\u5316\u4E00\u4E0B</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token string">&#39;use strict&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> lodash <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;lodash&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> answer <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">printAnswer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u6253\u5370</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">the answer is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>answer<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// \u6D4B\u8BD5 lodash \u7684\u80FD\u529B\uFF0C\u6253\u537042\u4E2A1</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lodash<span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span> answer<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

exports<span class="token punctuation">.</span>printAnswer <span class="token operator">=</span> printAnswer<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>\u4EE5\u4E0A\u683C\u5F0F\uFF0C\u5C31\u662F <code>CommonJS</code> \u89C4\u8303\u7684\u5199\u6CD5\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// CommonJS \u901A\u8FC7\u4E00\u4E2A\u5168\u5C40 require \u65B9\u6CD5\u8FDB\u884C\u6A21\u5757\u7684\u5F15\u5165 </span>
<span class="token keyword">var</span> lodash <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;lodash&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// CommonJS \u8FDB\u884C\u6A21\u5757\u5185\u65B9\u6CD5\u8F93\u51FA\u7684\u65B9\u5F0F</span>
module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>printAnswer <span class="token operator">=</span> printAnswer<span class="token punctuation">;</span>
<span class="token comment">// \u4E0A\u9762\u5199\u6CD5\u4E5F\u7B49\u4EF7\u4E8E\uFF1A</span>
exports<span class="token punctuation">.</span>printAnswer <span class="token operator">=</span> printAnswer<span class="token punctuation">;</span>
<span class="token comment">// \u56E0\u4E3A exports \u53D8\u91CF\u7B49\u4EF7\u4E8E module.exports</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u4E3A\u4E86\u89E3\u51B3 <code>node.js</code> \u5728\u6A21\u5757\u5316\u4E0A\u7684\u7F3A\u5931\uFF0C <strong>2009\u5E7410\u6708</strong> <code>CommonJS</code> \u89C4\u8303\u9996\u6B21\u88AB\u63D0\u51FA\u3002</p><p>\u6CE8\u610F\u8FD9\u4E2A\u5173\u952E\u8BCD\uFF1A <code>node.js</code>\u3002</p><p>\u662F\u7684\uFF0C<code>CommonJS</code> \u5E76\u4E0D\u662F\u5728\u6D4F\u89C8\u5668\u73AF\u5883\u8FD0\u884C\u7684\u89C4\u8303\uFF0C\u800C\u662F\u5728 <code>node.js</code> \u73AF\u5883\u4E0B\u8FD0\u884C\u7684\u3002</p><h3 id="_2-2-\u5982\u4F55\u8FD0\u884C" tabindex="-1"><a class="header-anchor" href="#_2-2-\u5982\u4F55\u8FD0\u884C" aria-hidden="true">#</a> 2.2 \u5982\u4F55\u8FD0\u884C</h3><p><code>run.js</code> \u811A\u672C\u3002 \u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// run.js</span>
<span class="token keyword">const</span> Test <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./bundle-by-lodash&#39;</span><span class="token punctuation">)</span>
Test<span class="token punctuation">.</span><span class="token function">printAnswer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u7136\u540E\uFF0C\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u6267\u884C\u811A\u672C</span>
<span class="token function">node</span> ./out/cjs/run.js 
<span class="token comment"># \u8F93\u51FA1\uFF1A </span>
<span class="token operator">&gt;</span> the answer is <span class="token number">42</span>
<span class="token comment"># \u8F93\u51FA2\uFF1A </span>
<span class="token operator">&gt;</span> <span class="token number">111111111111111111111111111111111111111111</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>\u53EF\u4EE5\u770B\u51FA\uFF0C<code>node.js</code> \u73AF\u5883\u662F\u5929\u7136\u652F\u6301 <code>CommonJS</code> \u7684\u3002</p><h3 id="_2-3-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_2-3-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 2.3 \u4F18\u7F3A\u70B9</h3><ul><li><p>\u4F18\u70B9</p><ol><li>\u5B8C\u5584\u7684\u6A21\u5757\u5316\u65B9\u6848\uFF0C\u5B8C\u7F8E\u89E3\u51B3\u4E86 <code>IIFE</code> \u7684\u5404\u79CD\u7F3A\u70B9\u3002</li></ol></li><li><p>\u7F3A\u70B9</p><ol><li>\u4E0D\u652F\u6301\u6D4F\u89C8\u5668\u73AF\u5883\uFF0C\u56E0\u4E3A\u8FD9\u79CD\u540C\u6B65\u7684\u5F15\u5165\u65B9\u5F0F\u53EF\u80FD\u5BFC\u81F4\u6D4F\u89C8\u5668\u5047\u6B7B\u3002</li></ol></li></ul><h2 id="\u4E09\u3001amd-\u548C-requirejs" tabindex="-1"><a class="header-anchor" href="#\u4E09\u3001amd-\u548C-requirejs" aria-hidden="true">#</a> \u4E09\u3001AMD \u548C requirejs !</h2><p>2011\u5E74\uFF0C <code>amdjs-api</code> \u5728\u4E1A\u5185\u88AB\u6B63\u5F0F\u63D0\u51FA\u3002</p><h3 id="_3-1-\u6253\u5305\u7ED3\u679C\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#_3-1-\u6253\u5305\u7ED3\u679C\u5206\u6790" aria-hidden="true">#</a> 3.1 \u6253\u5305\u7ED3\u679C\u5206\u6790</h3><p>amd \u683C\u5F0F\u7684\u6253\u5305\u7ED3\u679C\u5982\u4E0B\uFF1A</p>`,19),x=["src"],y=a(`<p>\u53EF\u4EE5\u770B\u5230\uFF0C\u6838\u5FC3\u5185\u5BB9\u662F\u4E00\u4E2A\u5168\u5C40\u65B9\u6CD5 <code>define</code> \u3002</p><p><code>define</code> \u65B9\u6CD5\u6709\u4E09\u4E2A\u5165\u53C2\uFF0C\u5206\u522B\u662F\uFF1A</p><ul><li><p><code>&quot;Test&quot;</code>, \u6A21\u5757\u540D\u79F0</p></li><li><p><code>[exports, lodash]</code> \u5206\u522B\u8868\u793A\u6A21\u5757\u7684\u8F93\u51FA\u548C\u5916\u90E8\u4F9D\u8D56</p></li><li><p>\u4E00\u4E2A\u4EE5 <code>exports</code> \u548C <code>lodash</code> \u4F5C\u4E3A\u5165\u53C2\u7684\u65B9\u6CD5\uFF0C\u4EE3\u8868\u6A21\u5757\u7684\u5B9E\u9645\u5185\u5BB9\u3002</p></li></ul><p>\u76F8\u6BD4\u4E8E <code>IIFE</code> \u548C <code>CommonJs</code> \u800C\u8A00\uFF0C<code>AMD</code> \u7684\u5199\u6CD5\u65E0\u7591\u662F\u590D\u6742\u4E14\u522B\u626D\u7684\u3002</p><p>\u4F46\u5B83\u5374\u5B9E\u5B9E\u5728\u5728\u662F\u89E3\u51B3\u4E86 <code>IIFE</code> \u548C <code>CommonJS</code> \u6240\u9762\u4E34\u7684\u95EE\u9898\uFF0C\u5BF9 <strong>\u201C\u6D4F\u89C8\u5668\u91CC\u5B8C\u5584\u7684JS\u6A21\u5757\u65B9\u6CD5\u201D</strong> \u63D0\u4F9B\u4E86\u4E00\u5957\u5B8C\u5584\u7684\u65B9\u6848\u3002</p><p>\u5C24\u5176\u662F <code>amd</code> \u6807\u51C6\u7684\u5B9E\u73B0\u65B9\u6848\uFF1A<code>requirejs</code>\u3002</p><p><code>requirejs</code> \u6240\u5B9E\u73B0\u7684 <code>AMD</code> \u4E0D\u4EC5\u89E3\u51B3\u4E86 <code>CommonJS</code> \u5728\u6D4F\u89C8\u5668\u7AEF\u7684\u4E0D\u9002\uFF0C\u901A\u8FC7\u5F02\u6B65\u7684\u65B9\u5F0F\u8FDB\u884C\u6A21\u5757\u52A0\u8F7D\u5B9E\u73B0\u4E86\u4E0D\u4F1A\u5BFC\u81F4\u5047\u6B7B\u7684\u80FD\u529B\uFF1B\u66F4\u662F\u5B8C\u5168\u5F25\u8865\u4E86 <code>IIFE</code> \u5B58\u5728\u7684\u5404\u7C7B\u7F3A\u9677\u3002</p><p><code>requirejs</code> \u5728\u4F7F\u7528\u65F6\uFF0C\u4E00\u822C\u60C5\u51B5\u4E0B\u662F\u4EE5\u4E0B\u56DB\u6B65\u6CD5\uFF1A</p><ol><li><p>\u5728\u6D4F\u89C8\u5668\u5185\u5F15\u5165 <code>require.js</code></p></li><li><p>\u901A\u8FC7 <code>requirejs.config</code> \u65B9\u6CD5\u5B9A\u4E49\u5168\u5C40\u7684\u4F9D\u8D56</p></li><li><p>\u901A\u8FC7 <code>requirejs.define</code> \u6CE8\u518C\u6A21\u5757</p></li><li><p>\u901A\u8FC7 <code>requirejs()</code> \u5B8C\u6210\u6A21\u5757\u5F15\u5165\u3002</p></li></ol><h3 id="_3-2-\u5982\u4F55\u8FD0\u884C" tabindex="-1"><a class="header-anchor" href="#_3-2-\u5982\u4F55\u8FD0\u884C" aria-hidden="true">#</a> 3.2 \u5982\u4F55\u8FD0\u884C</h3><p>\u5728 <code>out/amd</code> \u6253\u5305\u76EE\u5F55\u4E0B\u7684 <code>index.html</code> \u91CC\uFF0C\u6309\u5982\u4E0B\u65B9\u5F0F\u7F16\u6392\u4EE3\u7801\uFF1A</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 1. \u5F15\u5165 require.js --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./require.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 2. \u5B9A\u4E49\u5168\u5C40\u4F9D\u8D56 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    window<span class="token punctuation">.</span>requirejs<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">paths</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;lodash&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://cdn.bootcdn.net/ajax/libs/lodash.js/4.17.21/lodash.min&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 3. \u5B9A\u4E49\u6A21\u5757 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// 4. \u5F00\u9500\u6A21\u5757</span>
    window<span class="token punctuation">.</span><span class="token function">requirejs</span><span class="token punctuation">(</span>
      <span class="token punctuation">[</span><span class="token string">&#39;Test&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token keyword">function</span>   <span class="token punctuation">(</span><span class="token parameter">test</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        test<span class="token punctuation">.</span><span class="token function">printAnswer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="_3-3-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_3-3-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 3.3 \u4F18\u7F3A\u70B9</h3><ul><li><p>\u4F18\u70B9</p><ol><li><p>\u89E3\u51B3\u4E86 <code>CommonJS</code> \u7684\u7F3A\u70B9</p></li><li><p>\u89E3\u51B3\u4E86 <code>IIFE</code> \u7684\u7F3A\u70B9</p></li><li><p>\u4E00\u5957\u5B8C\u5907\u7684\u6D4F\u89C8\u5668\u91CC <code>js</code> \u6587\u4EF6\u6A21\u5757\u5316\u65B9\u6848</p></li></ol></li><li><p>\u7F3A\u70B9</p><ol><li>\u4EE3\u7801\u7EC4\u7EC7\u5F62\u5F0F\u522B\u626D\uFF0C\u53EF\u8BFB\u6027\u5DEE</li></ol></li></ul><p>\u73B0\u5728\uFF0C\u6211\u4EEC\u62E5\u6709\u4E86<strong>\u9762\u5411 <code>node.js</code> \u7684 <code>CommonJs</code></strong> \u548C <strong>\u9762\u5411\u6D4F\u89C8\u5668\u7684 <code>AMD</code></strong> \u4E24\u5957\u6807\u51C6\u3002</p><h2 id="\u56DB\u3001umd-\u4F1F\u5927\u7684\u6574\u5408" tabindex="-1"><a class="header-anchor" href="#\u56DB\u3001umd-\u4F1F\u5927\u7684\u6574\u5408" aria-hidden="true">#</a> \u56DB\u3001UMD \u4F1F\u5927\u7684\u6574\u5408</h2><blockquote><p>\u5B83\u6CA1\u6709\u505A\u4EC0\u4E48\u7A81\u7834\u6027\u7684\u521B\u9020\uFF0C\u4F46\u5B83\u662F\u96C6\u5927\u6210\u8005\u3002</p></blockquote><h3 id="_4-1-\u6253\u5305\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#_4-1-\u6253\u5305\u5206\u6790" aria-hidden="true">#</a> 4.1 \u6253\u5305\u5206\u6790</h3><p><code>umd</code> \u683C\u5F0F\u6784\u5EFA\u51FA\u6765\u7684\u4EE3\u7801\u7684\u53EF\u8BFB\u6027\u8FDB\u4E00\u6B65\u964D\u4F4E\u4E86\u3002</p>`,19),q=["src"],S=a('<p>\u6574\u6574\u4E00\u5927\u6BB5\u4EE3\u7801\uFF0C\u53EA\u662F\u5728\u5904\u7406\u517C\u5BB9\u6027\u95EE\u9898\uFF0C\u5224\u65AD\u5F53\u524D\u5E94\u8BE5\u4F7F\u7528 <code>amd</code> \u4EA6\u6216\u662F <code>CommonJS</code>\u3002</p><p>\u56E0\u6B64 <code>umd</code> \u7684\u4EE3\u7801\u548C\u5B9E\u73B0\u4E0D\u5728\u6B64\u8FDB\u884C\u8FC7\u591A\u5206\u6790\uFF0C\u5B83\u6240\u505A\u7684\u65E0\u975E\u4FBF\u662F\u8BA9\u540C\u4E00\u6BB5\u4EE3\u7801\u517C\u5BB9\u4E86 <code>amd</code> \u548C <code>CommonJS</code>\u3002</p><h3 id="_4-2-\u8FD0\u884C" tabindex="-1"><a class="header-anchor" href="#_4-2-\u8FD0\u884C" aria-hidden="true">#</a> 4.2 \u8FD0\u884C</h3><ul><li><p>\u5728\u6D4F\u89C8\u5668\u7AEF\uFF0C\u5B83\u7684\u8FD0\u884C\u65B9\u5F0F\u548C <code>amd</code> \u5B8C\u5168\u4E00\u81F4</p></li><li><p>\u5728node.js\u7AEF\uFF0C\u5B83\u5219\u548C <code>CommonJS</code> \u7684\u8FD0\u884C\u65B9\u5F0F\u5B8C\u5168\u4E00\u81F4</p></li></ul><h3 id="_4-3-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_4-3-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 4.3 \u4F18\u7F3A\u70B9</h3><ul><li><p>\u4F18\u70B9</p><ol><li>\u62B9\u5E73\u4E86\u4E00\u4E2A\u5305\u5728 <code>AMD</code> \u548C <code>CommonJS</code> \u91CC\u7684\u5DEE\u5F02</li></ol></li><li><p>\u7F3A\u70B9</p><ol><li>\u4F1A\u4E3A\u4E86\u517C\u5BB9\u4EA7\u751F\u5927\u91CF\u4E0D\u597D\u7406\u89E3\u7684\u4EE3\u7801\u3002\uFF08\u7406\u89E3\u96BE\u5EA6\u4E0E\u5305\u4F53\u79EF\uFF09</li></ol></li></ul><p><code>ES6</code> \u8349\u6848\u91CC\uFF0C\u867D\u7136\u63CF\u8FF0\u4E86<strong>\u6A21\u5757\u5E94\u8BE5\u5982\u4F55\u88AB\u52A0\u8F7D</strong>\uFF0C\u4F46\u5B83\u6CA1\u6709 <strong>\u201C\u52A0\u8F7D\u7A0B\u5E8F\u7684\u89C4\u8303\u201D</strong>\u3002</p><h2 id="\u4E94\u3001systemjs" tabindex="-1"><a class="header-anchor" href="#\u4E94\u3001systemjs" aria-hidden="true">#</a> \u4E94\u3001SystemJs</h2>',8),J=s("\u56E0\u6B64 "),I=n("code",null,"WHATWG\uFF08Web Hypertext Application Technology Working Group\uFF09",-1),E=s(" \u5373\u7F51\u9875\u8D85\u6587\u672C\u5E94\u7528\u6280\u672F\u5DE5\u4F5C\u5C0F\u7EC4\uFF0C\u63D0\u51FA\u4E86\u4E00\u5957\u66F4\u6709\u8FDC\u89C1\u7684\u89C4\u8303\uFF1A"),A={href:"https://github.com/whatwg/loader",target:"_blank",rel:"noopener noreferrer"},C=s("whatwg/loader"),F=s("\u3002"),M=a("<p>\u4E5F\u5C31\u662F <code>JavaScript Loader Standard</code> \uFF08JS \u52A0\u8F7D\u6807\u51C6\uFF09\u3002</p><blockquote><p>\u672C\u89C4\u8303\u63CF\u8FF0\u4E86\u4ECE JavaScript \u5BBF\u4E3B\u73AF\u5883\u4E2D\u52A0\u8F7D JavaScript \u6A21\u5757\u7684\u884C\u4E3A\u3002\u5B83\u8FD8\u63D0\u4F9B\u4E86\u7528\u4E8E\u62E6\u622A\u6A21\u5757\u52A0\u8F7D\u8FC7\u7A0B\u548C\u81EA\u5B9A\u4E49\u52A0\u8F7D\u884C\u4E3A\u7684 api\u3002</p></blockquote><p>\u57FA\u4E8E\u6B64\u89C4\u8303\uFF0C<code>SystemJS</code> \u8BDE\u751F\u4E86\u3002</p><p><code>SystemJS</code> \u662F\u76EE\u524D <code>whatwg/loader</code> \u89C4\u8303\u7684\u6700\u4F73\u5B9E\u8DF5\u8005\u3002</p>",4),$=["src"],D=a(`<p>\u53EF\u4EE5\u770B\u51FA\u6765\uFF0C<code>system</code> \u7684\u6253\u5305\u7ED3\u679C\u5176\u5B9E\u548C <code>amd</code> \u7C7B\u4F3C\uFF0C\u63D0\u4F9B\u4E86\u5168\u5C40\u7684\u5BF9\u8C61 <code>System</code>\uFF0C\u5E76\u63D0\u4F9B\u4E86\u6CE8\u518C\u7684\u65B9\u5F0F\u548C\u7EDF\u4E00\u7684\u5199\u6CD5\u3002</p><p>\u76F8\u6BD4\u4E8E <code>require.js</code>\uFF0C<code>SystemJS</code> \u7684 <code>System.import(&#39;module/name&#39;)</code> \u65B9\u5F0F\u5141\u8BB8\u4F60\u66F4\u4E3A\u201C\u61D2\u201D\u5730\u52A0\u8F7D\u6A21\u5757\uFF0C\u8FD9\u610F\u5473\u7740\u4F60\u65E0\u9700\u6BCF\u6B21\u90FD\u52A0\u8F7D\u4E00\u5927\u5806\u7684 <code>bundle</code>\uFF0C\u7528\u6237\u53EA\u9700\u8981\u4E3A\u4ED6\u80FD\u770B\u89C1\u7684\u9875\u9762\u5F00\u9500\u5E26\u5BBD\u3002</p><p>\u53E6\u5916\uFF0C\u6B63\u56E0\u4E3A <code>SystemJS</code> \u662F\u9762\u5411 <code>whatwg/loader</code> \u89C4\u8303\u5B9E\u8DF5\u7684\uFF0C\u56E0\u6B64\u5B83\u662F\u9762\u5411\u672A\u6765\u7684\u6A21\u5757\u4F9D\u8D56\u65B9\u5F0F\u3002</p><h2 id="\u516D\u3001esm" tabindex="-1"><a class="header-anchor" href="#\u516D\u3001esm" aria-hidden="true">#</a> \u516D\u3001ESM</h2><blockquote><p>ECMAScript modules, \u4E5F\u53EB ESM, Javascript \u6A21\u5757\u5316\u5B98\u65B9\u6807\u51C6\u683C\u5F0F\u3002</p></blockquote><h3 id="_6-1-\u6253\u5305\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#_6-1-\u6253\u5305\u5206\u6790" aria-hidden="true">#</a> 6.1 \u6253\u5305\u5206\u6790</h3><p>\u5728 <code>ESM</code> \u88AB\u63D0\u51FA\u6765\u4E4B\u524D\uFF0CJavaScript \u4E00\u76F4\u6CA1\u6709\u771F\u6B63\u610F\u4E49\u4E0A\u7684\u6A21\u5757\uFF08module\uFF09\u4F53\u7CFB\u3002</p><p>\u5B83\u7684\u89C4\u8303\u662F\u901A\u8FC7 <code>export</code> \u547D\u4EE4\u663E\u5F0F\u6307\u5B9A\u8F93\u51FA\u7684\u4EE3\u7801\uFF0C\u518D\u901A\u8FC7 <code>import</code> \u547D\u4EE4\u8F93\u5165\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u5BFC\u5165\u6A21\u5757</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> foo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;bar&#39;</span><span class="token punctuation">;</span>
<span class="token comment">// \u5BFC\u51FA\u547D\u4EE4</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> zap <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u8FD9\u4E5F\u662F\u6211\u4EEC\u65E5\u5E38\u5F00\u53D1\u4E2D\u6700\u4E3A\u719F\u6089\u7684\u5199\u6CD5\u3002</p><p>esm \u683C\u5F0F\u6253\u51FA\u6765\u7684\u5305</p>`,11),T=["src"],B=a(`<p><code>rollup</code> \u4F9D\u7136\u6CA1\u5FD8\u8BB0\u505A <code>tree-shaking</code></p><h3 id="_6-2-\u5982\u4F55\u8FD0\u884C" tabindex="-1"><a class="header-anchor" href="#_6-2-\u5982\u4F55\u8FD0\u884C" aria-hidden="true">#</a> 6.2 \u5982\u4F55\u8FD0\u884C</h3><p>\u90E8\u5206\u73B0\u4EE3\u6D4F\u89C8\u5668\u5DF2\u7ECF\u5F00\u59CB\u5B9E\u88C5 <code>&lt;script type=&quot;module&gt;</code> \u4E86\uFF0C\u56E0\u6B64\u5728\u6D4F\u89C8\u5668\u4E0A\u76F4\u63A5\u4F7F\u7528 <code>esm</code> \u5DF2\u6210\u4E3A\u73B0\u5B9E\u3002</p><p>\u4F46\u8FD0\u884C\u8D77\u6765\u6254\u9700\u8981\u505A\u4E00\u4E9B\u524D\u7F6E\u6B65\u9AA4\u3002</p><ol><li>\u5728js-modules\u76EE\u5F55\u4E0B\u8D77\u4E00\u4E2A\u672C\u5730\u9759\u6001\u670D\u52A1</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u5728js-modules\u76EE\u5F55\u4E0B\u8D77\u4E00\u4E2A\u672C\u5730\u9759\u6001\u670D\u52A1</span>
<span class="token builtin class-name">cd</span> js-modules <span class="token operator">&amp;&amp;</span> http-server
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li>\u628A <code>esm/bundle.js</code> \u6587\u4EF6\u7684\u7B2C\u4E00\u884C\u4FEE\u6539\u4E3A\uFF1A</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> repeat <span class="token keyword">from</span> <span class="token string">&#39;../../node_modules/lodash-es/repeat.js&#39;</span><span class="token punctuation">;</span>
<span class="token comment">// \u56E0\u4E3A\u9ED8\u8BA4\u7684lodash\u5E76\u4E0D\u662F\u8F93\u51FA\u7684 esm \u683C\u5F0F\uFF0C\u56E0\u6B64\u4E3A\u4E86demo\u6211\u4EEC\u9700\u8981\u505A\u4E00\u4E9B\u7279\u6B8A\u5904\u7406</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="\u603B\u7ED3-\u5206\u522B\u9002\u5408\u5728\u4EC0\u4E48\u573A\u666F\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u603B\u7ED3-\u5206\u522B\u9002\u5408\u5728\u4EC0\u4E48\u573A\u666F\u4F7F\u7528" aria-hidden="true">#</a> \u603B\u7ED3\uFF1A\u5206\u522B\u9002\u5408\u5728\u4EC0\u4E48\u573A\u666F\u4F7F\u7528</h2><ul><li><p><code>IIFE</code>: \u9002\u5408\u90E8\u5206\u573A\u666F\u4F5C\u4E3ASDK\u8FDB\u884C\u4F7F\u7528\uFF0C\u5C24\u5176\u662F\u9700\u8981\u628A\u81EA\u5DF1\u6302\u5230 <code>window</code> \u4E0A\u7684\u573A\u666F\u3002</p></li><li><p><code>CommonJS</code>: \u4EC5node.js\u4F7F\u7528\u7684\u5E93\u3002</p></li><li><p><code>AMD</code>: \u53EA\u9700\u8981\u5728\u6D4F\u89C8\u5668\u7AEF\u4F7F\u7528\u7684\u573A\u666F\u3002</p></li><li><p><code>UMD</code>: \u65E2\u53EF\u80FD\u5728\u6D4F\u89C8\u5668\u7AEF\u4E5F\u53EF\u80FD\u5728node.js\u91CC\u4F7F\u7528\u7684\u573A\u666F\u3002</p></li><li><p><code>SystemJs</code>: \u548CUMD\u7C7B\u4F3C\u3002\u76EE\u524D\u8F83\u51FA\u540D\u7684 <code>Angular</code> \u7528\u7684\u5C31\u662F\u5B83\u3002</p></li><li><p><code>ESM</code>: 1. \u8FD8\u4F1A\u88AB\u5F15\u7528\u3001\u4E8C\u6B21\u7F16\u8BD1\u7684\u573A\u666F\uFF08\u5982\u7EC4\u4EF6\u5E93\u7B49\uFF09\uFF1B2.\u6D4F\u89C8\u5668\u8C03\u8BD5\u573A\u666F\u5982 <code>vite.js</code>\u7684\u5F00\u53D1\u65F6\u30023.\u5BF9\u6D4F\u89C8\u5668\u517C\u5BB9\u6027\u975E\u5E38\u5BBD\u677E\u7684\u573A\u666F\u3002</p></li></ul>`,10);function V(e,N){const p=o("ExternalLinkIcon");return c(),l(i,null,[d,k,m,n("p",null,[b,n("a",h,[g,t(p)])]),w,n("img",{src:e.$withBase("/assets/rollup/base/c7ff249b1c574c6f8fe3bf46c6ca7899_tplv-k3u1fbpfcp-watermark.awebp"),alt:"demo"},null,8,v),f,n("img",{src:e.$withBase("/assets/rollup/base/95627d69b68b4cc9a4387db25cdf954c_tplv-k3u1fbpfcp-watermark.awebp"),alt:"demo"},null,8,j),_,n("img",{src:e.$withBase("/assets/rollup/base/49b6e3794785493b97322cbbf74d8d19_tplv-k3u1fbpfcp-watermark.awebp"),alt:"demo"},null,8,x),y,n("img",{src:e.$withBase("/assets/rollup/base/73f996a633424e23bffb9b592323bcb2_tplv-k3u1fbpfcp-watermark.awebp"),alt:"demo"},null,8,q),S,n("blockquote",null,[n("p",null,[J,I,E,n("a",A,[C,t(p)]),F])]),M,n("img",{src:e.$withBase("/assets/rollup/base/19c610fcbb654337b5ff23f451e52ab5_tplv-k3u1fbpfcp-watermark.awebp"),alt:"demo"},null,8,$),D,n("img",{src:e.$withBase("/assets/rollup/base/71c81b32140d4853b83d8ab6ff3bb764_tplv-k3u1fbpfcp-watermark.awebp"),alt:"demo"},null,8,T),B],64)}var U=r(u,[["render",V]]);export{U as default};
