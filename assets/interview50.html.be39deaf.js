import{r as o,o as r,c,b as e,d as s,F as i,a as n,e as t}from"./app.b05da4ec.js";import{_ as l}from"./plugin-vue_export-helper.21dcd24c.js";const p={},u=n('<h1 id="\u5F15\u5165" tabindex="-1"><a class="header-anchor" href="#\u5F15\u5165" aria-hidden="true">#</a> \u5F15\u5165</h1><p>\u5728\u7EC4\u5185\u505A\u4E86\u4E00\u6B21 React \u72B6\u6001\u7BA1\u7406\u7684\u5206\u4EAB\uFF0C\u603B\u7ED3\u4E86\u4E00\u4E9B redux \u7684\u95EE\u9898\uFF0C\u5B89\u5229\u4E86\u4E00\u4E0B mobx \u66F4\u65B9\u4FBF\u7684\u5730\u65B9\u3002\u6574\u7406\u6210\u6587\u5B57\uFF0C\u4FBF\u662F\u6B64\u6587\u3002\u6CE8\uFF1A\u672C\u6587\u672A\u6574\u7406\u5B8C\uFF0C\u5927\u90E8\u5206\u90FD\u662F\u5217\u7684\u5927\u7EB2\uFF0C\u9884\u8BA1\u5468\u4E8C\u524D\u6574\u7406\u5B8C\u3002ps: \u5E94\u8BE5\u6574\u7406\u4E0D\u5B8C</p><h1 id="\u76EE\u5F55" tabindex="-1"><a class="header-anchor" href="#\u76EE\u5F55" aria-hidden="true">#</a> \u76EE\u5F55</h1><ul><li>React \u72B6\u6001\u3001\u901A\u4FE1</li><li>Flux \u2014Redux \u2014Mobx</li><li>redux\uFF0Cmobx \u5BF9\u6BD4</li></ul><h1 id="react-\u4E3A\u4EC0\u4E48\u9700\u8981\u72B6\u6001\u7BA1\u7406" tabindex="-1"><a class="header-anchor" href="#react-\u4E3A\u4EC0\u4E48\u9700\u8981\u72B6\u6001\u7BA1\u7406" aria-hidden="true">#</a> React \u4E3A\u4EC0\u4E48\u9700\u8981\u72B6\u6001\u7BA1\u7406</h1><p>\u4E0D\u59A8\u5148\u56DE\u5FC6\u4E00\u4E0B react \u7684\u7279\u70B9\u3002</p><h2 id="react-\u7279\u70B9" tabindex="-1"><a class="header-anchor" href="#react-\u7279\u70B9" aria-hidden="true">#</a> React \u7279\u70B9</h2><ul><li>\u4E13\u6CE8 view \u5C42</li></ul><p>React \u5B98\u7F51\u662F\u8FD9\u4E48\u7B80\u4ECB\u7684\u3002JavaScript library for building user interfaces.\u4E13\u6CE8 view \u5C42 \u7684\u7279\u70B9\u51B3\u5B9A\u4E86\u5B83\u4E0D\u662F\u4E00\u4E2A\u5168\u80FD\u6846\u67B6\uFF0C\u76F8\u6BD4 angular \u8FD9\u79CD\u5168\u80FD\u6846\u67B6\uFF0CReact \u529F\u80FD\u8F83\u7B80\u5355\uFF0C\u5355\u4E00\u3002\u6BD4\u5982\u8BF4\u6CA1\u6709\u524D\u7AEF\u8DEF\u7531\uFF0C\u6CA1\u6709\u72B6\u6001\u7BA1\u7406\uFF0C\u6CA1\u6709\u4E00\u7AD9\u5F0F\u5F00\u53D1\u6587\u6863\u7B49\u3002</p><ul><li>f(state) = view</li></ul><p>react \u7EC4\u4EF6\u662F\u6839\u636E state \uFF08\u6216\u8005 props\uFF09\u53BB\u6E32\u67D3\u9875\u9762\u7684\uFF0C\u7C7B\u4F3C\u4E8E\u4E00\u4E2A\u51FD\u6570\uFF0C\u8F93\u5165 state\uFF0C\u8F93\u51FA view\u3002\u4E0D\u8FC7\u8FD9\u4E0D\u662F\u5B8C\u6574\u610F\u4E49\u4E0A\u7684 MDV\uFF08Model Driven View\uFF09\uFF0C\u6CA1\u6709\u5B8C\u5907\u7684 model \u5C42\u3002\u987A\u4FBF\u63D0\u4E00\u53E5\uFF0C\u611F\u89C9\u73B0\u5728\u7684\u7EC4\u4EF6\u5316\u548C MDV \u5728\u524D\u7AEF\u5F00\u53D1\u4E2D\u6B63\u706B\u70ED\uFF0C\u5927\u52BF\u6240\u8D8B...</p><ul><li>state \u81EA\u4E0A\u800C\u4E0B\u6D41\u5411\u3001Props \u53EA\u8BFB</li></ul><p>\u4ECE\u6700\u5F00\u59CB\u5199 React \u5F00\u59CB\uFF0C\u5C31\u4E86\u89E3\u8FD9\u6761\u7279\u70B9\u4E86\u3002state \u6D41\u5411\u662F\u81EA\u7EC4\u4EF6\u4ECE\u5916\u5230\u5185\uFF0C\u4ECE\u4E0A\u5230\u4E0B\u7684\uFF0C\u800C\u4E14\u4F20\u9012\u4E0B\u6765\u7684 props \u662F\u53EA\u8BFB\u7684\uFF0C\u5982\u679C\u4F60\u60F3\u66F4\u6539 props\uFF0C\u53EA\u80FD\u4E0A\u5C42\u7EC4\u4EF6\u4F20\u4E0B\u4E00\u4E2A\u5305\u88C5\u597D\u7684 setState \u65B9\u6CD5\u3002\u4E0D\u50CF angular \u6709 ng-model, vue \u6709 v-model\uFF0C \u63D0\u4F9B\u4E86\u53CC\u5411\u7ED1\u5B9A\u7684\u6307\u4EE4\u3002React \u4E2D\u7684\u7EA6\u5B9A\u5C31\u662F\u8FD9\u6837\uFF0C\u4F60\u53EF\u80FD\u89C9\u5F97\u8FD9\u5F88\u7E41\u7410\uFF0C\u4E0D\u8FC7 state \u7684\u6D41\u5411\u5374\u66F4\u6E05\u6670\u4E86\uFF0C\u5355\u5411\u6570\u636E\u6D41\u5728\u5927\u578B spa \u603B\u662F\u8981\u8BA8\u597D\u4E00\u4E9B\u7684\u3002</p><p>\u8FD9\u4E9B\u7279\u70B9\u51B3\u5B9A\u4E86\uFF0CReact \u672C\u8EAB\u662F\u6CA1\u6709\u63D0\u4F9B\u5F3A\u5927\u7684\u72B6\u6001\u7BA1\u7406\u529F\u80FD\u7684\uFF0C\u90A3 React \u7EC4\u4EF6\u662F\u5982\u4F55\u901A\u4FE1\u5462\uFF1F\u539F\u751F\u5927\u6982\u662F\u4E09\u79CD\u65B9\u5F0F\u3002</p><h2 id="react-\u7EC4\u4EF6\u901A\u4FE1" tabindex="-1"><a class="header-anchor" href="#react-\u7EC4\u4EF6\u901A\u4FE1" aria-hidden="true">#</a> React \u7EC4\u4EF6\u901A\u4FE1</h2>',15),d=t("\u4E4B\u524D\u6709\u603B\u7ED3\u8FC7 "),h={href:"https://github.com/sunyongjian/blog/issues/27",target:"_blank",rel:"noopener noreferrer"},b=t("React \u7684\u901A\u4FE1\u95EE\u9898"),m=t("\uFF0C\u518D\u6B21\u7B80\u5355\u63D0\u4E00\u4E0B\uFF0C\u5E76\u8BF4\u660E\u5B83\u4EEC\u5B58\u5728\u7684\u95EE\u9898\u3002\u5176\u5B9E\u5927\u6982\u5C31\u662F\u4E24\u79CD\u65B9\u5F0F\uFF0C\u5176\u4E00\u662F\u72B6\u6001\u63D0\u5347\uFF0C\u5373\u628A\u9700\u8981\u901A\u4FE1\u7684 state \u63D0\u5347\u5230\u4E24\u8005\u5171\u540C\u7684\u7236\u7EC4\u4EF6\uFF0C\u5B9E\u73B0\u5171\u4EAB\u548C Reaction\u3002\u4E0D\u8FC7\u72B6\u6001\u63D0\u5347\u53C8\u5206\u4E3A Continer \u7EC4\u4EF6\u5B9A\u4E49\u548C\u4F7F\u7528 Context \u5C5E\u6027\u4F20\u9012\uFF0C\u8FD9\u4E24\u8005\u867D\u7136\u90FD\u7B97\u662F\u72B6\u6001\u63D0\u5347\uFF0C\u4F46\u662F\u5B9E\u9645\u4E0D\u592A\u4E00\u6837\uFF0C\u6240\u4EE5\u4F1A\u5206\u4E3A\u4E09\u79CD\u65B9\u5F0F\u3002 "),x=e("img",{alt:"tx1",width:"394",src:"https://user-images.githubusercontent.com/18378034/34917562-2c68a1fe-f983-11e7-88d0-b92ddceb3676.png"},null,-1),f=e("p",null,"\u5982\u56FE\u3002A,B \u7EC4\u4EF6\u4E0B\u7684 A1,B1 \u8981\u5B9E\u73B0 state \u901A\u4FE1\u3002",-1),_=e("ul",null,[e("li",null,"Continer")],-1),g=e("img",{alt:"tx3",width:"376",src:"https://user-images.githubusercontent.com/18378034/34917565-3524b238-f983-11e7-905d-e6e6fd1af879.png"},null,-1),k=e("p",null,"\u5728 A,B \u4E4B\u4E0A\u589E\u52A0\u4E00\u4E2A Container \u7EC4\u4EF6\uFF0C\u5E76\u628A A1\uFF0CB1 \u9700\u8981\u5171\u4EAB\u7684\u72B6\u6001\u63D0\u5347\uFF0C\u5B9A\u4E49\u5230 Container\uFF0C\u901A\u8FC7 props \u4F20\u9012 state \u4EE5\u53CA changeState \u7684\u65B9\u6CD5\u3002 \u6B64\u65B9\u5F0F\u5B58\u5728\u7684\u4E00\u4E2A\u95EE\u9898\u662F\uFF0C\u4EE5\u540E\u5982\u679C\u6709\u4E00\u4E2A C \u7EC4\u4EF6\u7684 state\uFF0C\u4E0E A \u8981\u505A\u901A\u4FE1\uFF0C\u5C31\u4F1A\u518D\u6DFB\u52A0\u4E00\u4E2A Container \u7EC4\u4EF6\uFF0C\u5982\u679C\u662F A \u7684 state \u8981\u8DDF C \u5171\u4EAB\uFF0C\u66F4\u662F\u6BC1\u706D\u6027\u6253\u51FB\uFF0C\u4E4B\u524D\u63D0\u5347\u5230 Container \u7684 state\uFF0C\u8FD8\u8981\u518D\u63D0\u5347\u4E00\u5C42\u3002\u8FD9\u79CD\u65E0\u4F11\u6B62\u7684\u72B6\u6001\u63D0\u5347\u95EE\u9898\uFF0C\u540E\u671F\u7684\u901A\u4FE1\u6210\u672C\u975E\u5E38\u9AD8\uFF0C\u51E0\u4E4E\u662F\u91CD\u5199\u3002",-1),v=e("ul",null,[e("li",null,[t("Context "),e("img",{src:"https://user-images.githubusercontent.com/18378034/34917764-630fb04c-f985-11e7-9b4c-31af22e36618.png",alt:"image"})])],-1),C=t("\u4E4D\u4E00\u770B\uFF0CContext \u50CF\u662F\u4E00\u4E2A\u597D\u7684\u65B9\u6848\uFF0C\u5B83\u89E3\u51B3\u4E86\u65E0\u9650\u72B6\u6001\u63D0\u5347\u7684\u95EE\u9898\uFF0C\u90FD\u7EDF\u4E00\u653E\u5230\u5B9A\u4E49 Context \u7684\u7EC4\u4EF6\u5C31\u597D\u4E86\u3002\u4E0D\u8FC7 React \u5B98\u7F51\u5012\u662F\u4E0D\u5EFA\u8BAE\u7528\u5B83 "),w={href:"https://reactjs.org/docs/context.html#why-not-to-use-context",target:"_blank",rel:"noopener noreferrer"},R=t("Why Not To Use Context"),y=t("\uFF0C\u7406\u7531\u662F\u5B83\u4E00\u4E2A\u5B9E\u9A8C\u6027\u7684\u7279\u6027\uFF0C\u672A\u6765\u53EF\u80FD\u79FB\u9664\u3002\u4E0D\u8FC7\u4E2A\u4EBA\u89C9\u5F97\u5DF2\u7ECF\u4E0D\u592A\u53EF\u80FD\u79FB\u9664\u4E86\uFF0C\u56E0\u4E3A\u57FA\u672C React \u7684 Provider \u7EC4\u4EF6\u90FD\u662F\u57FA\u4E8E\u6B64\u505A\u7684\u3002"),E=e("p",null,[t("\u4E0B\u9762\u662F Context \u5B9A\u4E49\u7684\u4E00\u6BB5\u4EE3\u7801\uFF1A "),e("img",{src:"https://user-images.githubusercontent.com/18378034/34917765-678b1b70-f985-11e7-8e44-92c5f1ae1162.png",alt:"image"})],-1),S=e("p",null,"\u771F\u6B63\u4E0D\u8981\u4F7F\u7528 Context \u7684\u539F\u56E0\u662F\uFF0C\u5B83\u5728\u72B6\u6001\u66F4\u65B0\u901A\u77E5\u7EC4\u4EF6\u65B9\u9762\u5B58\u5728\u7F3A\u9677\u3002Context \u7684\u673A\u5236\u662F\u8FD9\u6837\u7684\uFF0C\u5047\u5982 context \u4E2D\u5B9A\u4E49\u5B58\u5728\u53D8\u5316\u7684\u503C\uFF0C\u6BD4\u5982\u4E0A\u56FE\u7684 value\uFF0CContext \u7EC4\u4EF6\u4F1A\u91CD\u65B0\u6E32\u67D3(\u6267\u884C SCU\uFF0CwillReceivedProps)\uFF0C\u91CD\u65B0\u751F\u6210 context \u5BF9\u8C61\u3002\u6B64\u4E3E\u4F1A\u4F7F\u5F97 Context \u4E0B\u9762\u7684\u6240\u6709\u7EC4\u4EF6\u90FD\u91CD\u65B0 render\uFF0C\u624D\u53EF\u4EE5\u63A5\u6536\u5230\u6700\u65B0\u7684 context \u5BF9\u8C61\u3002",-1),j=e("p",null,[t("\u5047\u5982\u67D0\u4E00\u5C42\uFF0C\u6BD4\u5982\u7EC4\u4EF6 A\uFF0C\u6CA1\u6709 re-render\uFF0C\u8BBE\u7F6E\u4E86 "),e("code",null,"shouldComponentUpdate = false"),t("\uFF0C\u6216\u8005\u662F\u4E00\u4E2A pureComponent\uFF0C\u90FD\u4F1A\u963B\u788D context \u5BF9\u8C61\u7684\u4F20\u9012\uFF0C\u76F8\u5F53\u4E8E\u5728\u6D41\u5411\u4E2D\u52A0\u4E86\u4E00\u5835\u5899\u3002")],-1),A=t("\u800C\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\u7684\u529E\u6CD5\uFF0C\u5C31\u662F\u4F7F\u7528\u53D1\u5E03\u8BA2\u9605\u53BB\u6539\u9020\u3002context \u5BF9\u8C61\u4E0D\u518D\u53D1\u751F\u6539\u53D8\uFF0C\u800C\u4E14\u5B50\u7EC4\u4EF6\u53EA\u7B2C\u4E00\u6B21\u6784\u5EFA\u7684\u65F6\u5019\u63A5\u6536 context \u5BF9\u8C61\uFF0C\u8FD9\u610F\u5473\u7740 context \u5BF9\u8C61\u8981\u5185\u90E8\u5B9E\u73B0\u8BA2\u9605\u548C\u53D1\u5E03\u7684\u529F\u80FD\uFF0C\u5373\u7EC4\u4EF6\u4F7F\u7528\u7684\u65F6\u5019\u8BA2\u9605\uFF0C\u5BF9\u8C61\u5C5E\u6027\u53D8\u5316\u7684\u65F6\u5019\u901A\u77E5\u7EC4\u4EF6 render\u3002\u5173\u4E8E\u6B64\u8BE6\u7EC6\u5185\u5BB9\u53EF\u4EE5\u5230"),P={href:"https://medium.com/@mweststrate/how-to-safely-use-react-context-b7e343eff076",target:"_blank",rel:"noopener noreferrer"},D=t("\u5982\u4F55\u5B89\u5168\u7684\u4F7F\u7528 Context"),T=t("\u67E5\u770B\uFF08\u9700\u8981\u5168\u5C40\u7FFB\u5899\uFF09"),F=e("ul",null,[e("li",null,"\u53D1\u5E03\u8BA2\u9605")],-1),z=e("img",{alt:"listx",width:"381",src:"https://user-images.githubusercontent.com/18378034/34917569-417a2da6-f983-11e7-87a3-62d3d0f8747f.png"},null,-1),I=t("\u8FD9\u4E2A\u6CA1\u4EC0\u4E48\u597D\u8BF4\u7684\uFF0C\u5C31\u662F\u4E00\u4E2A\u7EC4\u4EF6\u8BA2\u9605\uFF0C\u4E00\u4E2A\u7EC4\u4EF6\u53D1\u5E03\uFF0C\u4E86\u89E3\u89C2\u5BDF\u8005\u6A21\u5F0F\u7684\u90FD\u6E05\u9664\uFF0C"),M={href:"https://github.com/sunyongjian/blog/issues/27",target:"_blank",rel:"noopener noreferrer"},V=t("\u8FD9\u91CC"),U=t(" \u4E5F\u6709\u8BE6\u7EC6\u7684\u4EE3\u7801\u3002\u60F3\u6307\u51FA\u7684\u662F\u8FD9\u79CD\u65B9\u5F0F\u867D\u7136\u89E3\u51B3\u4E86\u72B6\u6001\u63D0\u5347\u5E26\u6765\u7684\u95EE\u9898\uFF0C\u4F46\u662F state \u4FDD\u5B58\u5728\u5404\u4E2A\u7EC4\u4EF6\u4E2D\uFF0C\u5982\u679C\u8981\u505A\u901A\u4FE1\uFF0C\u9700\u8981\u5199\u5F88\u591A\u8BA2\u9605/\u53D1\u5E03\u7684\u4EE3\u7801\uFF0C\u800C\u4E14\u8FD9\u90E8\u5206\u4EE3\u7801\u4E5F\u4E0D\u597D\u5C01\u88C5\u3002\u6700\u91CD\u8981\u7684\u662F\uFF0C\u6570\u636E\u6D41\u53D8\u5F97\u5F88\u4E71\uFF0C\u4E92\u76F8\u4E4B\u95F4\u90FD\u6709\u4F9D\u8D56\uFF0C\u8BA9\u4EE3\u7801\u7EF4\u62A4\u8D77\u6765\u6BD4\u8F83\u56F0\u96BE\u3002"),B=n('<p>\u5176\u5B9E\u5728\u8FD9\u91CC\u5C31\u4F1A\u60F3\u5230\uFF0C\u5047\u5982\u8BF4\u8BA9 Event \u4E2D\u5FC3\u7EDF\u4E00\u7BA1\u7406\u72B6\u6001\uFF0C\u7EDF\u4E00\u5206\u53D1\u5462\uFF0C\u7136\u540E\u6BCF\u4E2A\u7EC4\u4EF6\u53EA\u9700\u8981\u63A5\u6536\uFF0C\u8BA2\u9605\u7684\u5DE5\u4F5C\u4EA4\u7ED9 hoc \u53BB\u5904\u7406\uFF0C\u53EA\u9700\u8981\u544A\u8BC9 hoc \u8981\u4EC0\u4E48 state\uFF0C\u5B83\u904D\u4ECE Event \u4E2D\u5FC3\u53BB\u53D6\u3002\u5F53 state \u53D1\u751F\u6539\u53D8\uFF0CEvent \u4E2D\u5FC3 pub \u4E8B\u4EF6\uFF0Choc \u53BB\u5904\u7406 re-render \u7684\u5DE5\u4F5C\uFF0C\u611F\u89C9\u8FD9\u5C31\u662F\u76EE\u524D\u72B6\u6001\u7BA1\u7406 library \u90FD\u5728\u505A\u7684\uFF0C\u5927\u540C\u5C0F\u5F02\u3002</p><h3 id="\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#\u95EE\u9898" aria-hidden="true">#</a> \u95EE\u9898</h3><p>\u6240\u4EE5\u968F\u7740 spa \u7684\u589E\u5927\uFF0C\u8FD9\u4E9B\u65B9\u5F0F\u90FD\u4F1A\u6709\u4E00\u4E9B\u95EE\u9898\uFF0C\u72B6\u6001\u65E0\u4F11\u6B62\u63D0\u5347\uFF0Ccontext \u4E0D\u597D\u7528\uFF0C\u53D1\u5E03\u8BA2\u9605\u6570\u636E\u6D41\u5411\u6DF7\u4E71\uFF0C\u8DDF\u7EC4\u4EF6\u7684\u8026\u5408\u6027\u8F83\u9AD8\uFF0C\u6570\u636E\u6D41\u4E0D\u6E05\u6670\uFF0C \u5927\u578B spa \u7EC4\u4EF6\u901A\u4FE1\u6210\u672C\u592A\u9AD8\u3002 <img alt="statetx" width="385" src="https://user-images.githubusercontent.com/18378034/34917598-8922ea26-f983-11e7-9318-b2c277a6c7b6.png"></p><p>\u6240\u6709\u5E0C\u671B\u6709\u4E00\u4E2A\u72EC\u7ACB\u7BA1\u7406\u7684\u5730\u65B9\uFF0C\u50CF\u8FD9\u6837\uFF1A <img alt="storetx" width="351" src="https://user-images.githubusercontent.com/18378034/34917603-9d321a96-f983-11e7-8fea-e4764fef1010.png"></p><p>\u5B83\u53EF\u80FD\u4F1A\u6709\u4E00\u4E2A store \u7684\u6982\u5FF5\uFF0Cstore \u53BB\u5B58\u50A8\u6570\u636E\u548C\u72B6\u6001\uFF0C\u8FD8\u9700\u8981\u53EF\u4EE5\u88AB\u8BA2\u9605\uFF0C\u5373 store \u4E2D\u7684\u72B6\u6001\u53D1\u751F\u53D8\u5316\u8981\u505A\u5230\u53CA\u65F6\u7684\u901A\u77E5\u3002\u518D\u8FDB\u4E00\u6B65\u5C31\u662F\u53EF\u4EE5\u8DDF\u7EC4\u4EF6\u7684\u4EA4\u4E92\uFF0C\u901A\u4FE1\u90FD\u4EA4\u7ED9 store \u6765\u5904\u7406\u3002 \u8FD8\u53EF\u4EE5\u533A\u5206\u53D8\u5316\u548C\u526F\u4F5C\u7528\uFF0C\u505A\u4E0D\u540C\u7684\u5904\u7406\u3002</p><p>\u76EE\u524D\u793E\u533A\u4E2D\u719F\u77E5\u7684\u72B6\u6001\u7BA1\u7406\u5E93\u5C31\u90A3\u51E0\u4E2A\uFF0C\u63A5\u4E0B\u6765\u6309\u7167\u8FD9\u51E0\u4E2A\u5E93\u7684\u53D1\u5E03\u987A\u5E8F\u4ECB\u7ECD\u4E00\u4E0B\u3002</p><h1 id="flux" tabindex="-1"><a class="header-anchor" href="#flux" aria-hidden="true">#</a> Flux</h1><p>Flux \u662F\u968F\u7740 React \u7684\u8BDE\u751F\uFF0C\u800C\u63D0\u51FA\u7684\u4E00\u79CD\u72B6\u6001\u7BA1\u7406\u7684\u89E3\u51B3\u65B9\u6848\u3002\u7531\u4E8E MVC \u6A21\u5F0F\u5728\u5927\u578B\u524D\u7AEF\u5E94\u7528\u91CC\u53D8\u5F97\u6D41\u5411\u590D\u6742\uFF0C\u4EE5\u53CA Model \u548C View \u7684\u53CC\u5411\u7ED1\u5B9A\u95EE\u9898\u3002\u4FBF\u63D0\u51FA\u4E86\u8FD9\u6837\u7684\u7ED3\u6784\uFF1A <img src="https://user-images.githubusercontent.com/18378034/34917580-58d83204-f983-11e7-804f-4b88caaf1e28.jpg" alt="flux"></p><p>\u4ECE flux \u5F00\u59CB\uFF0C\u5C31\u662F\u4E25\u683C\u7684\u6570\u636E\u6D41\u5411\uFF0C\u53EA\u80FD\u901A\u8FC7 actions \u6539\u53D8 store\uFF0Cactions \u662F\u501F\u52A9 Dipatcher.dispatch \u8FD9\u6837\u7684 API \u53D1\u51FA\uFF0C\u7136\u540E\u518D\u4FEE\u6539 store\uFF0C\u7531 store \u53BB\u66F4\u65B0 view\u3002</p><p>\u51E0\u4E2A\u4E3B\u8981\u7684\u6982\u5FF5\uFF1A</p><ul><li>Dispatcher\uFF0C\u5904\u7406\u52A8\u4F5C\u7684\u5206\u53D1\uFF0C\u4FEE\u6539 Store \u4E0A\u7684\u6570\u636E\u3002register\uFF0Cdispatch</li><li>Store\uFF0C\u8D1F\u8D23\u5B58\u50A8\u6570\u636E\u548C\u5904\u7406\u6570\u636E\u76F8\u5173\u7684\u903B\u8F91.addChangeListener</li><li>Action\uFF0C\u9A71\u52A8 Dipatcher \u7684 JS \u5BF9\u8C61</li><li>VIew\uFF0C\u89C6\u56FE\u90E8\u5206\uFF0C\u5C55\u793A\u6570\u636E,react \u7EC4\u4EF6\u7684\u5206\u5C42\u7EC4\u5408</li></ul><p>flux \u5728 store \u9A71\u52A8\u7EC4\u4EF6\u8FD9\u4E00\u5C42\uFF0C\u6CA1\u6709\u505A\u5F88\u597D\u7684\u652F\u6301\uFF0C\u5982\u679C\u8981\u505A\u9700\u8981\u9891\u7E41\u7684\u7ED1\u5B9A\u4E8B\u4EF6\u3002\u53E6\u5916 action \u4E5F\u6CA1\u6709\u5F88\u597D\u7684\u5F02\u6B65\u65B9\u6848\u3002\u8FD9\u4E9B\u5DE5\u4F5C\u90FD\u9700\u8981\u7528\u6237\u81EA\u5DF1\u53BB\u6478\u7D22\u5904\u7406\u3002\u6240\u4EE5\u5728 redux \u53BB\u5904\u7406\u597D\u8FD9\u4E9B\u95EE\u9898\uFF0C\u5E76\u4E14\u63D0\u51FA\u4E86\u66F4\u597D\u7684\u601D\u60F3\u7684\u65F6\u5019\uFF0Cflux \u5F88\u5FEB\u5C31\u88AB\u66FF\u4EE3\u4E86\u3002\u4E0D\u8FC7 flux \u4E3A redux \u505A\u4E86\u5F88\u597D\u7684\u501F\u9274\uFF0C\u6D41\u7A0B\uFF0Caction \u5BF9\u8C61\uFF0C\u5355\u5411\u6570\u636E\u6D41\u3002</p><h1 id="redux" tabindex="-1"><a class="header-anchor" href="#redux" aria-hidden="true">#</a> Redux</h1><p><img src="https://user-images.githubusercontent.com/18378034/34917582-5c04bb28-f983-11e7-8fba-aa0f9b3b65dc.jpg" alt="redux"></p><p>\u5982\u679C\u8BF4 flux \u662F\u4E00\u79CD\u601D\u60F3\u7684\u8BDD\uFF0Credux \u5C31\u662F\u5BF9 flux \u6700\u597D\u7684\u5B9E\u73B0\u3002redux \u628A flux \u7684\u591A\u4E2A store \u6982\u5FF5\u5E72\u6389\u4E86\uFF0C\u53EA\u6709\u4E00\u4E2A store\uFF0C\u5E76\u4E14\u5185\u90E8\u7531 reducer \u8BA1\u7B97\u751F\u6210\u65B0\u7684 state tree\u3002\u628A dispatcher \u8DDF action \u89E3\u8026\uFF0Caction \u5C31\u662F\u4E00\u4E2A\u7B80\u5355\u7684 actionCreator\u3002redux \u4E5F\u57FA\u4E8E koa \u7684\u4E2D\u95F4\u4EF6\u601D\u60F3\uFF0C\u4E30\u5BCC\u4E86\u81EA\u5DF1\u7684\u62D3\u5C55\u6027\u3002</p><p>\u51E0\u4E2A\u4E3B\u8981\u7684\u6982\u5FF5\uFF1A</p><ul><li>\u4E00\u4E2A store\uFF0C\u7BA1\u7406 state\uFF0C\u5E76\u6709 dispatch(action) \uFF0Csubscribe \u7B49\u65B9\u6CD5\u3002</li><li>Reducers. Old =new state\u3002\u7EAF\u51FD\u6570\uFF0C\u7528\u4E8E\u8BA1\u7B97\u65B0\u7684 state\u3002</li><li>\u591A\u4E86 Provider\uFF0Cstore \u7684\u8BA2\u9605\u8005\uFF0C\u901A\u8FC7\u5B83\u6765\u4E0E react \u7B49\u6846\u67B6\u4EA4\u4E92\uFF0C\u6BD4\u5982 react-redux \u4E2D\u7684 Provider\u3002</li><li>Actions\u3002\u7531 provider \u521B\u5EFA\u5E76\u7531\u7528\u6237\u4E8B\u4EF6\u89E6\u53D1\u3002</li></ul><p>\u5982\u679C\u4F60\u662F flux \u7684\u4F7F\u7528\u8005\uFF0Credux \u51FA\u73B0\u7684\u65F6\u5019\uFF0C\u4F60\u57FA\u672C\u5F88\u5BB9\u6613\u63A5\u53D7\u8FD9\u4E2A\u601D\u60F3\uFF0C\u9664\u4E86\u4E00\u4E9B\u51FD\u6570\u5F0F\u7684\u601D\u7EF4\u3002\u5185\u5BB9\u65B9\u9762\u5728\u8FD9\u4E0D\u8FC7\u591A\u9610\u8FF0\u4E86\uFF0C\u8FD9\u4E0D\u662F\u672C\u6B21\u7684\u4E3B\u9898\uFF0C\u9762\u5411\u7684\u4E5F\u662F\u4F7F\u7528\u8FC7\u7684\u540C\u5B66\u3002</p><h2 id="redux-\u751F\u547D\u5468\u671F" tabindex="-1"><a class="header-anchor" href="#redux-\u751F\u547D\u5468\u671F" aria-hidden="true">#</a> Redux \u751F\u547D\u5468\u671F</h2><ul><li>Store.dispatch(action)</li><li>Reducer \u6267\u884C</li><li>\u751F\u6210 state tree</li><li>Store.subscribe(listener)</li></ul><p>\u4E0D\u8FC7\u5728\u6E90\u7801\u91CC\uFF0C\u90FD\u662F\u5728 createStore \u521D\u59CB\u5316\u7684\u65F6\u5019\uFF0Cdispatch \u65B9\u6CD5\u91CC\u5B9E\u73B0\u7684\u3002Redux \u7684 store\uFF0C\u8DDF\u4E0A\u9762\u5728\u201C\u53D1\u5E03\u8BA2\u9605\u201D\u8BBE\u60F3\u7684\u4E00\u79CD\u601D\u60F3\u5C31\u5F88\u5951\u5408\u4E86\uFF0Cstore \u4E0D\u4EC5\u4F5C\u4E3A\u4E00\u4E2A state \u7684\u5B58\u50A8\u4E2D\u5FC3\uFF0C\u8FD8\u662F\u4E8B\u4EF6\u4E2D\u5FC3\u3002\u6240\u6709\u7684\u8BA2\u9605\u4EE5\u53CA\u4E8B\u4EF6\u7684\u5206\u53D1\uFF0C\u90FD\u5728 store \u91CC\u9762\u5904\u7406\u4E86\u3002\u800C\u5177\u4F53\u5982\u4F55\u5C55\u793A\u3001\u8BA1\u7B97\u6570\u636E\uFF08state\uFF09\uFF0C\u662F\u7528\u6237\u4F20\u5165\u7684 reducer \u51B3\u5B9A\u7684\u3002\u5173\u4E8E store \u548C component \u7684\u7ED3\u5408\uFF0C\u901A\u8FC7 react-redux \u4E2D\u7684\u4E24\u4E2A\u7EC4\u4EF6\uFF0C\u5C31\u53EF\u4EE5\u5F88\u597D\u7684\u89E3\u51B3\u4E86\uFF0Cconnect \u4E5F\u7684\u786E\u662F hoc\uFF0C\u4F60\u53EA\u9700\u8981\u544A\u8BC9\u5B83\u4F60\u7528\u4EC0\u4E48\u5C5E\u6027\uFF0C\u5B83\u5C31\u5E2E\u4F60\u81EA\u52A8\u5904\u7406 reaction \u7684 re-render\u3002</p><h2 id="\u7279\u70B9" tabindex="-1"><a class="header-anchor" href="#\u7279\u70B9" aria-hidden="true">#</a> \u7279\u70B9</h2><p>\u603B\u7ED3\u4E86\u51E0\u4E2A\uFF1A</p>',23),N=t("CQRS \u547D\u4EE4\u4E0E\u67E5\u8BE2\u804C\u8D23\u5206\u79BB\uFF0C\u8BF4\u5B9E\u8BDD\u8FD9\u4E2A\u6982\u5FF5\u8DDF redux \u6709\u5173\u662F\u5728\u77E5\u4E4E\u7684\u67D0\u4E2A\u95EE\u7B54\u770B\u5230\u7684\u3002\u5F53\u628A redux \u7684 store \u770B\u505A\u4E00\u4E2A model \u7684\u65F6\u5019\uFF0C\u4E4B\u524D\u5BF9 model \u7684\u67E5\u8BE2\u3001\u547D\u4EE4\uFF08\u589E\u5220\u6539\uFF09\u5BF9\u5E94\u7684\u5C31\u50CF redux \u91CC \u7684 reducer\u3001action \u3002\u4E0D\u8BA8\u8BBA\u8FD9\u4E24\u8005\u5230\u5E95\u6709\u4F55\u5185\u5728\u7684\u8054\u7CFB\uFF0C\u7F16\u7A0B\u7684\u601D\u60F3\u672C\u6765\u5C31\u662F\u76F8\u540C\u7684\u3002\u5982\u679C\u4F60\u6709\u5174\u8DA3\uFF0C\u4F60\u4E5F\u53EF\u4EE5\u4E86\u89E3\u4E00\u4E0B Event Sourcing \u548C DDD\uFF0C\u90FD\u4F1A\u627E\u5230\u8DDF redux \u76F8\u4F3C\u7684\u5F71\u5B50\u3002"),J={href:"https://zhuanlan.zhihu.com/p/25383827",target:"_blank",rel:"noopener noreferrer"},L=t("\u63A8\u8350"),O=e("li",null,"\u5355\u5411\u6570\u636E\u6D41 \u4ECE flux \u5F00\u59CB\u63D0\u51FA\uFF0C\u4E5F\u662F\u76EE\u524D\u72B6\u6001\u7BA1\u7406\u6BD4\u8F83\u559C\u6B22\u91C7\u7528\u7684\uFF0C\u56E0\u4E3A\u7B80\u5355\u6E05\u6670\u7684\u6570\u636E\u6D41\u5411\u3002",-1),Q=e("li",null,"\u5F88\u591A\u51FD\u6570\u5F0F\u7684\u601D\u60F3\u3002\u6BD4\u5982 Reducer\uFF0CImmutable Data\uFF0CPure Func\uFF0CRedux \u5185\u90E8\u5B9E\u73B0\uFF0C compose \u7B49\u3002",-1),q=e("li",null,"\u901A\u8FC7 state \u7684\u5F15\u7528\u53D8\u5316\uFF0C\u5224\u65AD\u662F\u5426\u66F4\u65B0\u7EC4\u4EF6\u3002 \u65E2\u7136 state \u7684\u4E0D\u53EF\u53D8\u6570\u636E\uFF0C\u57FA\u4E8E\u6B64\u7406\u8BBA\u57FA\u7840\uFF0C\u4F7F\u7528\u6700\u7B80\u5355\u7684\u6BD4\u8F83\u6570\u636E\u5F15\u7528\uFF0C\u53BB\u5224\u65AD\u662F\u4E0D\u662F\u8981\u66F4\u65B0 view\u3002",-1),H=e("li",null,"\u5929\u751F\u652F\u6301\u65F6\u95F4\u56DE\u6EAF \u56E0\u4E3A\u6BCF\u6B21\u7684 state \u90FD\u662F\u65B0\u7684\u5F15\u7528\uFF0C\u4E0A\u4E00\u6B21\u7684 state \u8FD8\u53EF\u4EE5\u4FDD\u5B58\uFF0C\u611F\u89C9\u4E0A\u662F\u6709\u4E86\u57FA\u7840\uFF0C\u5B9E\u9645\u8981\u505A\u5F88\u591A\u5DE5\u4F5C\u3002\u53EF\u4EE5\u501F\u9274 redux-devtools \u3002",-1),W=e("li",null,"\u4E2D\u95F4\u4EF6\u62D3\u5C55 redux \u6700\u5F3A\u5927\u7684\u5730\u65B9\u4FBF\u5728\u4E8E\u4E2D\u95F4\u4EF6\u7684\u62D3\u5C55\u3002\u6709\u4E00\u53E5\u8BDD\u53EB\u201C\u597D\u7684\u8BBE\u8BA1\u4E0D\u5982\u597D\u7684\u62D3\u5C55\u6027\u201D\u3002",-1),X=n('<h2 id="\u4E00\u4E9B\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#\u4E00\u4E9B\u95EE\u9898" aria-hidden="true">#</a> \u4E00\u4E9B\u95EE\u9898</h2><p>\u8FD9\u662F\u8981\u63D0\u53CA\u7684\u91CD\u70B9\u3002\u5728\u5B66\u4E60\u548C\u4F7F\u7528 redux \u7684\u65F6\u5019\uFF0C\u9047\u5230\u4E86\u5F88\u591A\u7684\u95EE\u9898\uFF0C\u603B\u7ED3\u6765\u5C31\u662F\u4EE5\u4E0B\u56DB\u70B9\uFF0C\u76F8\u4FE1\u5927\u5BB6\u4E5F\u4F1A\u78B0\u5230...</p><p>\u7EA6\u5B9A\u591A\u3001\u7406\u89E3\u96BE</p><p>\u80F6\u6C34\u4EE3\u7801</p><p>Effects</p><p>\u624B\u52A8\u4F18\u5316</p><h2 id="\u7EA6\u5B9A" tabindex="-1"><a class="header-anchor" href="#\u7EA6\u5B9A" aria-hidden="true">#</a> \u7EA6\u5B9A</h2><p>\u5BF9\u4E8E\u521D\u5B66\u8005\u6765\u8BF4\uFF0C\u4E00\u5806\u7684\u7EA6\u5B9A\u770B\u7740\u5C31\u5934\u5927\uFF0C\u4E5F\u4E0D\u77E5\u9053\u4E3A\u5565\u8FD9\u4E48\u5199\u3002\u5927\u6982\u5217\u4E3E\u51E0\u4E2A\uFF1A</p>',8),G=t("\u4E09\u5927\u539F\u5219\uFF0Cstore \u552F\u4E00\uFF0Cstate \u53EA\u8BFB\uFF0C reducer \u7EAF\u51FD\u6570\u3002 \u8FD9\u4E2A\u662F\u5B66\u4E60 redux \u521D\u671F\u5C31\u70C2\u719F\u4E8E\u5FC3\u7684\u6982\u5FF5\u4E86\uFF0C\u51E0\u4E4E\u6240\u6709 redux \u76F8\u5173\u7684\u5165\u95E8\u6559\u7A0B\uFF0C\u90FD\u4F1A\u6709\u8FD9\u6837\u7684\u4ECB\u7ECD\uFF0C\u603B\u4E4B\uFF0C\u5C31\u7B97\u4E0D\u660E\u767D\uFF0C\u4E5F\u8BB0\u4F4F\u4E86\u3002\u9996\u5148\uFF0Cstore \u8BBE\u8BA1\u6210\u552F\u4E00\u7684\u5BF9\u8C61\uFF0C\u4E00\u4E2A\u5BF9\u8C61\u80FD\u5E26\u6765\u5F88\u591A\u5B83\u7B80\u5355\u7684\u7279\u70B9\uFF0C\u6BD4\u5982\u6240\u6709\u7684 reducer \u8BA1\u7B97\u90FD\u5408\u5E76\u5230\u8FD9\u4E2A store\uFF0C\u6240\u6709\u7684\u7EC4\u4EF6\u4FEE\u6539\uFF0C\u6CE8\u5165\u90FD\u662F\u57FA\u4E8E\u8FD9\u4E00\u4E2A\u5BF9\u8C61\uFF1B\u521D\u59CB\u5316\u540C\u6784\u5E94\u7528\u7684\u72B6\u6001\uFF08\u670D\u52A1\u7AEF\u6E32\u67D3\uFF09\u4E5F\u66F4\u65B9\u4FBF\uFF0C\u670D\u52A1\u7AEF\u76F4\u63A5\u6302\u8F7D\u4E00\u4E2A "),K=e("code",null," __ initalStore__",-1),Y=t(" \u5C31\u53EF\u4EE5\u4E86\u3002state \u53EA\u8BFB\u6709\u51FD\u6570\u5F0F\u7684\u611F\u89C9\uFF0C\u53E6\u5916\u4E5F\u662F\u5355\u5411\u6570\u636E\u6D41\u7684\u5173\u952E\uFF0C\u4F60\u4E0D\u80FD\u76F4\u63A5\u4FEE\u6539 state \u5BF9\u8C61\uFF0C\u53EA\u53EF\u4EE5\u901A\u8FC7 action \u53BB\u4FEE\u6539\uFF0C\u8FD9\u4E2A\u8DDF flux \u662F\u76F8\u4F3C\u7684\u601D\u60F3\u3002reducer \u662F\u7EAF\u51FD\u6570\uFF0C\u4E5F\u6765\u81EA\u4E8E FP\u3002\u4E0D\u80FD\u6709\u526F\u4F5C\u7528\u7684\u64CD\u4F5C\uFF0C\u901A\u5E38\u662F state \u7684\u4E00\u4E9B\u91CD\u7EC4\uFF0C\u62F7\u8D1D\u548C\u8BA1\u7B97\u3002\u4F7F\u7528 redux\uFF0C\u4F1A\u6709\u5F88\u591A\u51FD\u6570\u5F0F\u7684\u601D\u60F3\uFF0C\u6240\u4EE5\u5F88\u591A\u4EBA\u90FD\u4F1A\u5B66\u4E00\u6CE2\u51FD\u6570\u5F0F\uFF0C\u6BD4\u5982\u8BF4... "),Z={href:"https://github.com/sunyongjian/FP-Code/tree/master/src",target:"_blank",rel:"noopener noreferrer"},$=t("FP-Code"),ee=e("li",null,[t("\u5EFA\u8BAE\u7528\u5355\u72EC\u7684\u6587\u4EF6\u5B58\u653E action\uFF1B\u4E0D\u8981\u5B9A\u4E49 action \u5BF9\u8C61\uFF0C\u8981\u7528 actionCreator \u521B\u5EFA\u3002 "),e("img",{alt:"dispatch",width:"570",src:"https://user-images.githubusercontent.com/18378034/35388243-ed9695ba-020d-11e8-8ff7-0a36df466aa2.png"}),t(" \u4E3A\u4E86\u4E0D\u8BA9\u5B50\u7EC4\u4EF6\u611F\u53D7\u5230 redux \u7684\u5B58\u5728\uFF0C\u901A\u8FC7 bindActionCreators \u751F\u6210\u8FD9\u79CD "),e("code",null," () =dispatch(actionCreator);"),t(" \u5F62\u5F0F\u7684 function\u3002 \u5982\u4E0A\u56FE\uFF0C\u6700\u540E\u53EF\u80FD\u5C31\u662F increase \u8FD9\u6837\u7684\u4E00\u4E2A\u51FD\u6570\uFF0C\u7136\u540E\u7EC4\u4EF6\u5185\u90E8\u53BB\u8C03\u7528\u6B64\u65B9\u6CD5\uFF0C\u6BD4\u5982\u7528 connect \u8FD9\u6837\u7684\u7EC4\u4EF6\u6CE8\u5165 actions \u65B9\u6CD5\u3002\u6700\u5F00\u59CB\u5199 redux \u7684\u65F6\u5019\uFF0C\u89C1\u8FC7\u5F88\u591A\u4EBA\u5728\u7EC4\u4EF6\u5185\u90E8\u8C03\u7528 dispatch \u65B9\u6CD5\u7684\uFF0C\u56E0\u4E3A connect \u7684\u7B2C\u4E8C\u4E2A\u53C2\u6570 "),e("code",null,"MapDispatchToProps"),t(" \u4E0D\u4F20\u7684\u65F6\u5019\uFF0C\u5B83\u4F1A\u9ED8\u8BA4\u628A dispatch \u65B9\u6CD5\u4F20\u4E0B\u6765\u3002\u7136\u540E\u5C31\u76F4\u63A5\u5728\u7EC4\u4EF6\u5185\u90E8\u5199 "),e("code",null,"dispatch({ type: \u2019INCREASE\u2018})"),t(" \u8FD9\u6837\u7684\u4EE3\u7801\uFF0C\u8FD9\u8DDF\u4F7F\u7528 bindActionCreator \u7684\u5C31\u5F62\u6210\u4E86\u4E0D\u540C\u7684\u98CE\u683C\u3002\u53E6\u5916\uFF0C\u5927\u9879\u76EE\u4E2D\u662F\u4E0D\u5EFA\u8BAE\u7EC4\u4EF6\u76F4\u63A5\u7528 dispatch \u65B9\u6CD5\u7684\uFF0Credux \u5EFA\u8BAE\u7684\u662F smart + dumb\uFF0C\u5373\u6709\u4E00\u4E2A container \u7EC4\u4EF6\u8DDF redux \u505A\u4EA4\u6613\uFF0C\u4E0B\u9762\u7684\u7EC4\u4EF6\u8981\u505A\u6210\u53EF\u590D\u7528\u7684\uFF0C\u8DDF redux \u65E0\u5F3A\u8026\u5408\u7684\u7EC4\u4EF6... \u6240\u4EE5\uFF0C\u7406\u89E3\u7684 actionCreator \u7684\u4F5C\u7528\u5927\u6982\u662F\u8FD9\u6837\u3002")],-1),te=t("reducer \u5F3A\u8C03\u7EAF\u51FD\u6570\uFF0C\u8BA1\u7B97\u3002\u8FD4\u56DE\u65B0\u7684 state\u3002 \u8FD4\u56DE\u65B0\u7684 state\uFF08redux \u4E2D\u7684 state \u6982\u5FF5\u7406\u89E3\u4E3A reducer \u8FD4\u56DE\u7684\u8BA1\u7B97\u7ED3\u679C\uFF09\uFF0C\u610F\u5473\u7740\u4E0D\u53EF\u53D8\u6570\u636E\uFF0C\u4E0D\u53EF\u53D8\u6570\u636E\u64CD\u4F5C\u5C31\u8BBE\u8BA1\u5230\u4E00\u4E2A\u62F7\u8D1D\u7684\u95EE\u9898\u3002\u6DF1\u6D45\u62F7\u8D1D\u7684\u65B9\u6CD5\uFF0C\u6DF1\u62F7\u8D1D\u7684\u6027\u80FD\u95EE\u9898\uFF0C\u8282\u7EA6\u5185\u5B58\u7B49\u3002\u53EF\u80FD\u4F1A\u5F15\u5165 immutable \u8FD9\u6837\u7684\u5E93\uFF0C\u53C8\u589E\u52A0\u4E86\u4EE3\u7801\u590D\u6742\u5EA6\uFF0C\u4FB5\u5165\u6027\u8F83\u5F3A\uFF0C\u800C\u4E14\u4E0D\u662F plainObject\uFF0C\u5B58\u5728\u8F6C\u6362\u95EE\u9898\uFF0C\u53EF\u80FD\u4F1A\u5F15\u5165 "),ae={href:"https://github.com/indexiatech/redux-immutablejs",target:"_blank",rel:"noopener noreferrer"},se=t("redux-immutable"),ne=t(" \u4E2D\u7684 combineReducers \u53BB\u5904\u7406\uFF0C\u5185\u90E8\u505A\u8F6C\u6362\u3002\u3002\u3002\u603B\u4E4B\u89E3\u51B3\u7684\u65B9\u6848\u603B\u662F\u6709\uFF0C\u53EA\u662F\u6709\u4E00\u5B9A\u7684\u6210\u672C\u3002redux \u793E\u533A\u624D\u4EBA\u8FD8\u662F\u5F88\u591A\u7684\u3002"),oe=e("li",null,"state \u8BBE\u8BA1\u7684\u5C3D\u91CF\u6241\u5E73\uFF0C\u6700\u591A\u4E24\u4E09\u5C42\u3002 \u5D4C\u5957\u592A\u591A\u5C42\u7684\u8BDD\uFF0C\u53D6\u503C\u7684\u65F6\u5019\u6BD4\u8F83\u9EBB\u70E6\uFF0C\u4E5F\u9700\u8981\u6709\u5BB9\u9519\u5904\u7406\uFF08\u5F53\u7136\u6765\u4E00\u4E2A lodash \u5C31\u597D\u4E86\uFF09\u3002\u8FD9\u53EA\u662F\u67D0\u4E2A state \u7684\u5C42\u7EA7\u8BBE\u8BA1\u95EE\u9898\u3002\u8FD8\u6709\u5BF9\u6574\u4E2A store \u7684\u8BBE\u8BA1\uFF0C\u6BD4\u5982\u6839\u636E\u6A21\u5757\u5212\u5206\uFF0C\u5171\u4EAB\u7684\u72B6\u6001\u548C\u79C1\u6709\u7684\u533A\u5206\u3002\u8C08\u5230\u8FD9\uFF0C\u53C8\u5F15\u7533\u51FA\u4EC0\u4E48\u6837\u7684\u72B6\u6001\u8BE5\u653E\u5230 redux \u4E2D\uFF0C\u5927\u591A\u6570\u60C5\u51B5\u4E0B\uFF0C\u7528 redux \u5F88\u597D\u7684\u5904\u7406\u4E86\u590D\u6742\u7684\u5F02\u6B65\u903B\u8F91\u95EE\u9898\uFF0C\u6240\u4EE5\u590D\u6742\u7684 Effect \u63A8\u8350\u653E\u5230 redux\u3002\u53E6\u5916\u5C31\u662F\u4E00\u4E9B\u9700\u8981\u5171\u4EAB\u7684\uFF0C\u6BD4\u5982 userInfo\uFF0CAppState\uFF0C\u7279\u6B8A\u7684\u754C\u9762\u72B6\u6001\u3002",-1),re=n('<p>\u8FD9\u91CC\u603B\u7ED3\u4E86\u4E00\u4E9B\u4F7F\u7528 redux \u7684\u65F6\u5019\uFF0C\u5B98\u7F51\u548C\u793E\u533A\u63A8\u8350\u7684\u4E00\u4E9B\u89C4\u8303\u6216\u8005\u7EA6\u5B9A\u3002\u5982\u679C\u9075\u5B88\u7EA6\u5B9A\u8FD8\u597D\uFF0C\u5982\u679C\u98CE\u683C\u4E0D\u4E00\u7684\u8BDD\uFF0C\u5176\u5B9E\u8FD9\u4E9B\u7EA6\u5B9A\u5C31\u5931\u53BB\u4E86\u539F\u672C\u7684\u610F\u4E49\u4E86\u3002\u5176\u5B9E\u66F4\u60F3\u8868\u8FBE\u7684\u662F\uFF0C\u5BF9\u4E8E\u65B0\u624B\u6765\u8BF4\uFF0C\u5B66\u4E60\u6210\u672C\u771F\u7684\u633A\u9AD8\u7684\u3002\u7136\u540E\u5C31\u662F Effects \u7684\u4E00\u4E9B\u95EE\u9898\u3002</p><h2 id="effects" tabindex="-1"><a class="header-anchor" href="#effects" aria-hidden="true">#</a> Effects</h2><p>\u8FD9\u91CC\u7684 Effects \u4E3B\u8981\u6307\u5F02\u6B65\u8BF7\u6C42\u3002\u6700\u5F00\u59CB\u7684\u65B9\u5F0F\u662F\u5F15\u5165 redux-thunk\uFF0Credux-promise \u8FD9\u6837\u7684\u4E2D\u95F4\u4EF6\uFF0C\u53BB\u6539\u9020 store \u7684\u539F\u751F dispatch \u65B9\u6CD5\uFF08compose \u5F62\u6210\u7684\u51FD\u6570\u8C03\u7528\u94FE\uFF09\uFF0C\u4F7F\u5F97\u5B83\u7684\u53C2\u6570\u4E0D\u518D\u5C40\u9650\u4E8E\u4E00\u4E2A action \u5BF9\u8C61\uFF0C\u800C\u662F\u53EF\u4EE5\u63A5\u6536 function \u6216\u8005 promise \u5BF9\u8C61\uFF0C\u901A\u8FC7\u8FD9\u4E00\u5C42\u628A Effect \u5F71\u54CD\u53BB\u9664\uFF0C\u53D8\u6210\u539F\u6765\u7684 dispatch \u4E00\u4E2A action \u5BF9\u8C61\uFF08\u4EE3\u7801\u5C42\u9762\u5C31\u662F\u7ECF\u8FC7\u51FD\u6570\u8C03\u7528\u94FE\uFF0C\u6700\u540E\u6267\u884C\u539F\u6765\u7684 dispatch \u65B9\u6CD5\uFF09\u3002\u5982\u4E0B\u56FE\uFF1A</p><img alt="thunk1" width="683" src="https://user-images.githubusercontent.com/18378034/35396242-4bd19a12-0227-11e8-94e0-9420cc9f2b6e.png"><p>\u5F15\u5165 thunk \u540E\u7684\u6570\u636E\u6D41\u5411\u5927\u6982\u662F\u8FD9\u6837\u7684\u3002\u7EC4\u4EF6\u5185\u90E8\u901A\u8FC7\u4E8B\u4EF6\u6216\u8005\u751F\u547D\u5468\u671F\uFF0C\u53BB\u8C03\u7528 hoc \u6CE8\u5165\u8FDB\u6765\u7684 actions \u65B9\u6CD5\uFF0C\u901A\u5E38\u662F\u901A\u8FC7 actionCreator \u521B\u5EFA\u7684\u3002\u7531\u4E8E\u4E2D\u95F4\u4EF6\u7684\u673A\u5236\uFF0C\u53EF\u4EE5\u5728 actionCreator \u4E2D return \u4E00\u4E2A\u65B0\u7684 function\uFF0C\u81EA\u7136\u800C\u7136\u7684\uFF0C\u5F02\u6B65\u4EE3\u7801\u548C\u4E00\u4E9B\u903B\u8F91\u5C31\u5199\u5728\u4E86\u8FD9\u91CC\uFF0C\u4E5F\u5C31\u662F\u56FE\u4E2D\u9EC4\u8272\u6807\u8BB0\u7684\u3002\u6BD4\u5982 request \u4E00\u4E2A\u8BF7\u6C42\uFF0C\u5F53 response \u7684\u65F6\u5019\uFF0C\u518D\u6267\u884C dispatch \u65B9\u6CD5\uFF0C\u628A\u8FD4\u56DE\u7684 data \u4F20\u9012\u5230 reducer\u3002reducer \u901A\u8FC7\u8BA1\u7B97\u3001\u62F7\u8D1D\uFF0C\u5408\u5E76\u751F\u6210\u65B0\u7684 state tree\uFF0C\u7136\u540E\u4F1A\u6267\u884C listeners\uFF0C\u65E0\u8BBA\u4F60\u662F\u901A\u8FC7 connect \u8FD8\u662F\u8BA2\u9605\u7684\u65B9\u5F0F\uFF0C\u603B\u4E4B\u4F60\u7684\u7EC4\u4EF6\u4F1A re-render \u4E86\uFF0C\u63A5\u6536\u65B0\u7684 state\u3002\u5927\u6982\u7684\u6D41\u7A0B\u5927\u5BB6\u90FD\u5F88\u6E05\u695A\u4E86\u5E94\u8BE5\uFF0C\u95EE\u9898\u5728\u4E8E\u5B9E\u9645\u4E1A\u52A1\u4E2D\uFF0CactionCreator \u8FD9\u91CC\u4F1A\u6709\u5F88\u591A\u903B\u8F91\u4EE3\u7801\uFF0C\u5F00\u59CB\u53EF\u80FD\u628A\u6700\u57FA\u672C\u7684 fetch\uFF0Cloading\uFF0Cerror \u7684 catch \u8FD9\u6837\u7684\u4E1C\u897F\u901A\u8FC7 function \u5C01\u88C5\uFF0C\u53BB\u89E3\u51B3\u6700\u901A\u7528\u7684\u573A\u666F\u3002\u4E0D\u8FC7\u6D89\u53CA\u5230\u590D\u6742\u7684\u4E1A\u52A1\uFF0C\u5C31\u4F1A\u5728 then \u4E2D\u51FA\u73B0\u5F88\u591A\u7684\u4E1A\u52A1\u903B\u8F91\u4EE3\u7801\uFF0C\u6BD4\u5982\u6709\u65F6\u5019\u9700\u8981\u8F6E\u8BE2\u7684\u673A\u5236\uFF0C\u6709\u65F6\u5019\u9700\u8981 dispatch \u591A\u4E2A action\uFF0C\u5904\u7406\u8D77\u6765\u4E0D\u90A3\u4E48\u987A\u624B\uFF0C\u800C\u4E14actionCreator \u4E2D\u7684\u4EE3\u7801\u8D8A\u6765\u8D8A\u591A\uFF0C\u4E0D\u518D\u662F\u4E00\u4E2A\u7B80\u5355\u7684 function\uFF0Caction \u4E0D\u518D\u7EAF\u51C0\uFF0C\u8FDD\u80CC\u4E86\u5B83\u7684\u539F\u610F\u3002\u6240\u4EE5 saga \u51FA\u73B0\u4E86\u3002 <img alt="saga1" width="662" src="https://user-images.githubusercontent.com/18378034/35396246-4e606826-0227-11e8-8bb8-d606d3e203d7.png"></p><p>saga \u5168\u5C40\u4E0B\u8DD1\u7740 generator\uFF0C\u9700\u8981 watch \u7684 actionType\uFF0C\u901A\u5E38\u662F async \u7684\uFF0C\u7528 takeEvery \u6216\u8005 takeLatest \u8FD9\u6837\u7684\u65B9\u6CD5\u505A\u76D1\u542C\uFF0C\u5982 <code>yield* takeEvery(&#39;FETCH_REQUESTED&#39;, fetchData)</code>\uFF0C\u5F53 type \u5339\u914D\u5230 <code>FETCH_REQUESTED</code>\uFF0C\u5C31\u4F1A\u8FDB\u5165 saga\uFF0C\u6267\u884C fetchData\uFF08saga \u4E2D\u6BCF\u4E2A\u5F02\u6B65\u4EFB\u52A1\u88AB\u5B9A\u4E49\u4E3A Effect\uFF09\uFF0C\u4E0D\u5339\u914D\u7684\u5C31\u4ECD\u7136\u8D70\u5230 reducer\u3002\u8DDF thunk \u4E0D\u540C\u7684\u662F\u5F02\u6B65\u4EE3\u7801\u5199\u5230\u4E86 saga \u4E2D\uFF0C\u4E5F\u662F\u56FE\u4E2D\u6807\u9EC4\u7684\u3002\u6574\u4E2A\u6D41\u7A0B\u770B\u8D77\u6765\u66F4\u6E05\u6670\uFF0C\u6BCF\u4E00\u90E8\u5206\u7684\u804C\u8D23\u5355\u4E00\uFF0C actionCreator \u548C Effect\u3001\u4E1A\u52A1\u903B\u8F91\u4E5F\u89E3\u8026\u4E86\u3002\u591A\u4EBA\u5F00\u53D1\u7684\u5927\u578B\u9879\u76EE\u4E2D\uFF0C\u8FD9\u6837\u7684\u4EE3\u7801\u7EC4\u7EC7\u7684\u786E\u662F\u53EF\u8BFB\u6027\u66F4\u9AD8\uFF0C\u5982\u679C\u4F60\u5BF9\u6574\u4E2A\u6570\u636E\u6D41\u6BD4\u8F83\u6E05\u6670\uFF0C\u4FBF\u53EF\u4EE5\u5F88\u5FEB\u5B9A\u4F4D\u5230\u4EE3\u7801\u3002\u5F53\u7136 saga \u7684\u4F18\u52BF\u4E0D\u6B62\u8FD9\u4E00\u70B9\uFF0C\u5B83\u8FD8\u5C01\u88C5\u4E86\u4E00\u4E9B\u590D\u6742\u7684\u4E1A\u52A1\u573A\u666F\u3002\u6BD4\u5982\u67D0\u4E2A\u5F02\u6B65\u4EFB\u52A1\u8C03\u7528\u591A\u6B21\u7684\u65F6\u5019\uFF0Csaga \u53EF\u4EE5 takeLatest\uFF0C\u4E5F\u5C31\u662F\u53EA\u4FDD\u7559\u6700\u65B0\u7684\u4EFB\u52A1\uFF0C\u800C thunk \u662F\u6BD4\u8F83\u96BE\u5904\u7406\u7684\uFF0C\u4E4B\u524D\u7684\u4EFB\u52A1\u4E0D\u5BB9\u6613\u53D6\u6D88\u3002\u53E6\u5916 saga \u4E5F\u63D0\u4F9B\u4E86 cancel \u7684 API \u53EF\u4EE5\u53D6\u6D88 task\u3002\u5B83\u8FD8\u5C01\u88C5\u4E86\u4E00\u4E9B <code>promise.all, promise race</code> \u7684\u529F\u80FD\uFF0C\u4E5F\u9ED8\u8BA4\u652F\u6301\u5835\u585E\u548C\u975E\u5835\u585E\u7684\u8C03\u7528\u3002\u603B\u4E4B\uFF0C\u5F02\u6B65\u5904\u7406\u7684\u5F88\u591A\u5E38\u89C1\u5B83\u90FD\u5E2E\u60F3\u5230\u4E86\uFF0C\u597D\u597D\u770B\u770B\u6587\u6863\uFF0C\u4F60\u4FBF\u53EF\u4EE5\u5F88\u5BB9\u6613\u5E76\u4E14\u5F88\u4F18\u96C5\u7684\u5199\u51FA\u76F8\u5173\u4EE3\u7801\u3002</p>',6),ce=t("\u4E0D\u8FC7 saga \u4E5F\u6709\u4E00\u4E9B\u95EE\u9898\u3002\u6BD4\u5982\u9519\u8BEF\u7684 catch\uFF0C\u57FA\u672C\u9700\u8981\u6BCF\u4E2A task \u8981\u52A0\u4E00\u4E2A try catch\uFF0C\u4E0D\u7136\u6700\u540E saga \u629B\u51FA\u7684\u9519\uFF0C\u4F60\u6839\u672C\u4E0D\u77E5\u9053\u662F\u54EA\u91CC\u51FA\u4E86\u95EE\u9898\uFF0C\u8C03\u8BD5\u4E0D\u5C3D\u4EBA\u610F\uFF0Cbabel \u7684 source-map \u6709\u65F6\u4E5F\u4F1A\u5B9A\u4F4D\u5931\u8BEF\u3002\u8FD8\u6709\u4E00\u4E2A\u95EE\u9898\u4FBF\u662F\uFF0Credux \u672C\u6765\u5B9A\u4E49\u7684\u6587\u4EF6\u5C31\u591F\u591A\u4E86\uFF0C\u53C8\u51FA\u73B0\u4E86\u4E00\u4E2A saga\uFF0C\u611F\u89C9\u50CF\u662F\u628A actionCreator \u91CC\u7684\u5F02\u6B65\u4EE3\u7801\u6362\u4E86\u4E2A\u5730\u65B9\u800C\u5DF2\u3002\u53E6\u5916\uFF0C\u6700\u5F00\u59CB\u7684\u91CD\u590D\u7684\u4EE3\u7801\u4E5F\u5F88\u591A\uFF0C\u91CD\u590D\u7684\u76D1\u542C saga \u4EFB\u52A1\uFF0Ccall Effect\uFF0Cput action\uFF0C\u4FBF\u53C8\u9700\u8981\u5C01\u88C5\u4E00\u4E2A\u901A\u7528\u7684 fetchSaga \u7684\u65B9\u6CD5\uFF0C\u53BB\u5904\u7406\u5E38\u89C1\u7684\u5F02\u6B65\u4EFB\u52A1\u3002\u5F15\u5165 saga \u7684\u597D\u5904\u662F\u4F18\u96C5\u7684\u5904\u7406\u7684\u5F02\u6B65 action\uFF0C\u63D0\u4F9B\u7684 API \u4E5F\u5F88\u5F3A\u5927\u3002\u4F46\u662F\u5F15\u5165\u4E00\u65B9\u9762\u662F\u5B66\u4E60\u6210\u672C\uFF0C\u4E00\u65B9\u9762\u53C8\u662F\u5C01\u88C5\u7684\u65F6\u95F4\u6210\u672C\uFF0C\u8FD9\u90FD\u662F\u9879\u76EE\u9009\u578B\u9700\u8981\u8003\u8651\u7684\u3002\u5982\u679C\u4F60\u7684\u9879\u76EE\u6709\u5927\u91CF\u7684\u8BFB\u53D6\u64CD\u4F5C\uFF0C\u8F6E\u8BE2\u7684\u72B6\u6001\uFF0C\u6BD4\u8F83\u9EBB\u70E6\u7684\u5F02\u6B65\u4EFB\u52A1\uFF0C\u90A3\u5F15\u5165 saga \u5E26\u6765\u7684\u6548\u679C\u662F\u6BD4\u8F83\u660E\u663E\u7684\u3002\u53CD\u4E4B\uFF0C\u5219\u662F\u589E\u52A0\u4E86\u5F00\u53D1\u548C\u7EF4\u62A4\u6210\u672C\uFF0C\u8FD8\u662F\u8981\u6CE8\u610F\u573A\u666F\u3002\u5BF9 saga \u7684\u7814\u7A76\u4E5F\u6CA1\u6709\u7279\u522B\u6DF1\u5165\uFF0C\u4E0D\u518D\u8FC7\u591A\u8D58\u8FF0\u4E86\uFF0C\u7F51\u4E0A\u4E5F\u6709\u5F88\u591A\u7684\u6587\u7AE0\uFF0C\u63A8\u8350\u51E0\u4E2A\uFF1A "),ie={href:"https://zhuanlan.zhihu.com/p/23012870",target:"_blank",rel:"noopener noreferrer"},le=t("1.redux-saga \u5B9E\u8DF5\u603B\u7ED3"),pe=t("\uFF0C 2."),ue=e("h2",{id:"\u80F6\u6C34\u4EE3\u7801",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#\u80F6\u6C34\u4EE3\u7801","aria-hidden":"true"},"#"),t(" \u80F6\u6C34\u4EE3\u7801")],-1),de=e("p",null,"redux \u7684\u80F6\u6C34\u4EE3\u7801\u4E5F\u662F\u5F00\u53D1\u65F6\u6BD4\u8F83\u75DB\u82E6\u7684\u5730\u65B9\u3002",-1),he=e("ul",null,[e("li",null,"actions\u3001reducers\u3001actionTypes \u90FD\u8981\u5B9A\u4E49 \u5728\u4F7F\u7528 redux \u7684\u9879\u76EE\u4E2D\uFF0C\u5F53\u4F60\u8981\u5171\u4EAB\u72B6\u6001\u6216\u8005\u5904\u7406\u5F02\u6B65\u7684\u65F6\u5019\uFF0C\u5047\u5982\u8BF4\u653E\u5230 redux \u4E2D\uFF0C\u5C31\u4E0D\u5F97\u4E0D\u5B9A\u4E49\u4E00\u5806\u7C7B\u4F3C\u7684\u6587\u4EF6\u3002\u6709\u7684\u4EBA\u89C9\u5F97\u8FD9\u662F\u6BD4\u8F83\u597D\u7684\u7EA6\u675F\u548C\u89C4\u8303\uFF0C\u800C\u6709\u7684\u4EBA\u5C31\u89C9\u5F97\u8FD9\u79CD\u5F62\u5F0F\u6BD4\u8F83\u7E41\u7410\uFF0C\u8FD9\u4E2A\u95EE\u9898\u5C31\u4EC1\u8005\u89C1\u4EC1\u667A\u8005\u89C1\u667A\u4E86\u3002"),e("li",null,"saga \u91CC\u9762\u7684\u5404\u79CD yield =\u5C01\u88C5")],-1),be=e("p",null,"\u5173\u4E8E\u8FD9\u4E00\u90E8\u5206\uFF0C\u793E\u533A\u4E5F\u6709\u5F88\u591A\u65B9\u6848\uFF0C\u6BD4\u8F83\u6210\u719F\u7684 dva\uFF0C \u5C01\u88C5\u7684\u5DF2\u7ECF\u5F88\u597D\u4E86\uFF0C\u628A actions\u3001reducers\u3001actionTypes \u4EE5 model \u7684\u6982\u5FF5\u5C01\u88C5\uFF0C\u5C3D\u7BA1 redux \u672C\u6765 model \u7684\u6982\u5FF5\u5F88\u5F31\u3002saga \u7684\u4E5F\u5C01\u88C5\u5230\u4E86 effects \u4E2D\u3002",-1),me=e("h2",{id:"\u624B\u52A8\u4F18\u5316",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#\u624B\u52A8\u4F18\u5316","aria-hidden":"true"},"#"),t(" \u624B\u52A8\u4F18\u5316")],-1),xe=e("p",null,"\u8DDF\u5927\u90E8\u5206\u6280\u672F\u6808\u4E00\u6837\uFF0Credux \u4E5F\u9700\u8981\u624B\u52A8\u8C03\u4F18\uFF0C\u4E0B\u9762\u662F\u603B\u7ED3\u7684\u51E0\u4E2A\uFF1A",-1),fe=t("mapStateToProps \u91C7\u7528 "),_e={href:"https://github.com/reactjs/reselect",target:"_blank",rel:"noopener noreferrer"},ge=t("Reselect"),ke=t(" \u505A\u7F13\u5B58 \u5F53\u4F60\u91C7\u7528 connect \u53BB\u7ED9\u7EC4\u4EF6\u6CE8\u5165 state \u7684\u65F6\u5019\uFF0C\u9700\u8981 mapStateToProps \u51FD\u6570\u53BB\u6307\u5B9A\u4F60\u9700\u8981\u7684 state\u3002\u800C\u8FD9\u91CC\u6709\u4E2A\u95EE\u9898\uFF0C\u5C31\u662F\u53EF\u80FD\u4F60\u8FD9\u4E2A\u7EC4\u4EF6\u53EA\u4F7F\u7528\u4E86\u67D0\u4E2A state\uFF0C\u4F46\u662F\u5176\u4ED6\u65E0\u5173\u7684 action \u89E6\u53D1\u7684\u65F6\u5019\uFF0CmapState \u51FD\u6570\u90FD\u4F1A\u91CD\u65B0\u6267\u884C\u8BA1\u7B97\u3002\u5728\u8FD9\u91CC\u5C31\u8E29\u8FC7\u5751\uFF0C\u6BD4\u5982\u7684 mapState \u662F\u8FD9\u6837\u7684\uFF1A"),ve=n(`<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> mapStateToProps <span class="token operator">=</span> <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span> state<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">toJS</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u5728 reducer \u4E2D\u628A data \u901A\u8FC7 immutablejs \u5904\u7406\u4E86\uFF0C\u7EC4\u4EF6\u4E2D\u4F7F\u7528\u7684\u65F6\u5019\u9700\u8981 toJS \u8F6C\u6362\u6210\u539F\u751F\u5BF9\u8C61\uFF0C\u800C\u6BCF\u6B21\u6267\u884C\u8FD4\u56DE\u7684\u90FD\u662F\u65B0\u5BF9\u8C61\u3002\u6240\u4EE5\u6BCF\u6B21\u5305\u88C5\u540E\u7684\u7EC4\u4EF6\u505A shadowEqual \u7684\u65F6\u5019\uFF0C\u90FD\u8BA4\u4E3A state \u53D1\u751F\u53D8\u5316\u4E86\uFF0C\u5BFC\u81F4\u65E0\u5173\u7684 action \u4E5F\u4F1A\u5F15\u53D1\u8BE5\u7EC4\u4EF6\u7684 re-render\u3002\u8FD9\u662F\u7531 connect \u7684\u673A\u5236\u51B3\u5B9A\u7684\uFF0Choc \u5185\u90E8\u8C03\u7528 store \u7684 subscribe \u51FD\u6570\uFF0C\u6CE8\u518C\u4E00\u4E2A\u4E8B\u4EF6\uFF0C\u5F53 dispatch \u4E00\u4E2A action\uFF0C\u6240\u6709 reducer \u6267\u884C\u540E\uFF0C\u4F1A pub \u8FD9\u4E2A\u4E8B\u4EF6\uFF0C\u6B64\u4E8B\u4EF6\u5C31\u4F1A\u5BF9\u6BD4\u4E24\u6B21 state \u7684\u5F15\u7528\u662F\u5426\u53D8\u5316\uFF0C\u51B3\u5B9A\u7EC4\u4EF6\u662F\u5426\u66F4\u65B0 state \u4EE5\u53CA render\u3002\u6240\u4EE5\u8FD9\u91CC\u6BCF\u6B21\u8FD4\u56DE\u7684\u67D0\u4E2A state \u5982\u679C\u90FD\u662F\u65B0\u5F15\u7528\uFF0C\u662F\u6709\u95EE\u9898\uFF0C\u5E76\u4E14 mapStateToProps \u51FD\u6570\u4E5F\u4E0D\u5E94\u8BE5\u5B58\u653E\u5927\u91CF\u7684\u8BA1\u7B97\u4EE3\u7801\u3002</p><p>reselect \u5C31\u662F\u7528\u6765\u89E3\u51B3\u4E0A\u8FF0\u91CD\u590D\u8BA1\u7B97\u7684\u95EE\u9898\u7684\uFF0C\u5176\u5B9E reselect \u53EF\u4EE5\u7406\u89E3\u4E3A\u4E00\u4E2A\u7F13\u5B58\u51FD\u6570\uFF0C\u5F53\u4F60\u505A\u8FC7\u4E00\u6B21\u8BA1\u7B97\u6216\u8005\u5904\u7406\uFF0C\u8BE5\u7ED3\u679C\u88AB\u7F13\u5B58\u5230\u54C8\u5E0C\u8868\uFF08\u5C31\u662F\u4E00\u4E2A\u5BF9\u8C61\uFF09\u4E2D\uFF0C\u4E0B\u6B21\u9047\u5230\u540C\u6837\u7684\u8F93\u5165\uFF0C\u76F4\u63A5\u4ECE\u7F13\u5B58\u4E2D\u8C03\u53D6\uFF0C\u5C31\u4E0D\u7528\u91CD\u65B0\u8BA1\u7B97\u4E86\uFF0C\u4E5F\u5C31\u4E0D\u4F1A\u6709\u5751\uFF0C\u6548\u7387\u4E5F\u597D\u4E00\u4E9B\u3002\u4E00\u4E2A\u7F13\u5B58\u51FD\u6570\u7C7B\u4F3C\u4E8E\u8FD9\u6837\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> memoize <span class="token operator">=</span> <span class="token punctuation">(</span>f<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>cache<span class="token punctuation">[</span>str<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      cache<span class="token punctuation">[</span>str<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> cache<span class="token punctuation">[</span>str<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> capitalized <span class="token operator">=</span> <span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token operator">=</span>str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> str<span class="token punctuation">.</span>length<span class="token punctuation">)</span>

<span class="token keyword">const</span> memoCap <span class="token operator">=</span> <span class="token function">memoize</span><span class="token punctuation">(</span>capitalized<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>\u5229\u7528\u51FD\u6570\u5F0F\u7684\u9AD8\u9636\u51FD\u6570\u548C js \u7684\u95ED\u5305\u5C31\u53EF\u4EE5\u5B9E\u73B0\u6700\u57FA\u672C\u7684\u7F13\u5B58\u51FD\u6570\uFF0C\u7B80\u5355\u6765\u8BF4\uFF0Creselect \u5C31\u662F\u8FD9\u6837\u7684\u539F\u7406\u3002\u5F53\u4F60 f \u7684\u7ED3\u679C\u9700\u8981\u7684\u8BA1\u7B97\u8D8A\u591A\uFF0C\u6267\u884C\u7684\u4EE3\u7801\u8D8A\u591A\uFF0C\u7F13\u5B58\u7684\u610F\u4E49\u5C31\u8D8A\u5927\u3002</p><ul><li>\u6709\u65F6\u5019\u9700\u8981 SCU \u586B state \u8BBE\u8BA1\u4E0D\u5408\u7406\u7684\u5751 React \u7EC4\u4EF6\u672C\u8EAB\u5C31\u62E5\u6709 shouldUpdate \u7684\u80FD\u529B\uFF0C\u6BD4\u5982\u7EC4\u4EF6 state \u7684\u5F15\u7528\u662F\u5426\u53D8\u5316\u3002\u53E6\u5916\uFF0CReact \u4E5F\u63D0\u4F9B\u4E86 shouldComponentUpdate \u8FD9\u6837\u7684\u51FD\u6570\uFF0C\u8BA9\u4F60\u53EF\u4EE5\u81EA\u5DF1\u63A7\u5236 update \u7684\u7EC6\u5EA6\u3002 ------------------------------------------\u5206\u5272\u7EBF------------------------------------------------</li><li>pureComponent shallowEqual</li><li>[ ] scu \u7684\u7B80\u5316\u7248\uFF0C\u624B\u52A8\u4F5C\u6D45\u5C42\u6BD4\u8F83\u3002</li><li>state \u7684\u5C42\u6B21\u8BBE\u8BA1\uFF0C\u62F7\u8D1D\u3001\u8BBE\u503C\u95EE\u9898</li><li>[ ] \u5BF9\u540E\u7AEF\u6570\u636E\u62C6\u5206</li></ul><p>then\uFF0Cdva \u53BB\u5C01\u88C5\u7684\u601D\u60F3\u6216\u8BB8\u662F\u66F4\u597D\u7684\u9009\u62E9\u3002try mobx...</p><img alt="mobx1" width="626" src="https://user-images.githubusercontent.com/18378034/34917637-563952c0-f984-11e7-8c5a-f5bfc18497b2.png"><h1 id="mobx" tabindex="-1"><a class="header-anchor" href="#mobx" aria-hidden="true">#</a> mobx</h1><ul><li>[ ] \u975E\u5E38\u9002\u5408\u6570\u636E\u9A71\u52A8\u7684\u5E94\u7528\u3002</li></ul><p>redux \u8FD8\u662F\u9075\u5FAA\u7684 setState \u4E00\u5957\u6D41\u7A0B\uFF0Cmobx \u63A8\u51FA\u7684\u65F6\u5019\uFF0C\u4E00\u4E2A\u4E3B\u5F20\u5C31\u662F\u5E72\u6389 setState \u7684\u673A\u5236\u3002</p><p><img src="https://user-images.githubusercontent.com/18378034/34917660-6fb4fe8e-f984-11e7-90e3-d5d57d006b70.png" alt="image"></p><h2 id="api" tabindex="-1"><a class="header-anchor" href="#api" aria-hidden="true">#</a> API</h2><ul><li>[ ] \u53EA\u6709\u4E94\u4E2A\u3002 Observable Computed Autonrun Action Observer</li></ul><h2 id="\u6570\u636E\u6D41" tabindex="-1"><a class="header-anchor" href="#\u6570\u636E\u6D41" aria-hidden="true">#</a> \u6570\u636E\u6D41</h2><p><img src="https://user-images.githubusercontent.com/18378034/34917669-86bd3f24-f984-11e7-9e4a-d4815726752b.png" alt="image"></p><h2 id="\u4F9D\u8D56\u6536\u96C6" tabindex="-1"><a class="header-anchor" href="#\u4F9D\u8D56\u6536\u96C6" aria-hidden="true">#</a> \u4F9D\u8D56\u6536\u96C6</h2><ul><li>[ ] mobx \u6838\u5FC3\u70B9\u3002</li></ul><h2 id="\u751F\u547D\u5468\u671F" tabindex="-1"><a class="header-anchor" href="#\u751F\u547D\u5468\u671F" aria-hidden="true">#</a> \u751F\u547D\u5468\u671F</h2><ul><li>[ ] \u53EA\u6709\u4E00\u4E2A componentWillReact\uFF0C\u5F53\u7136\u4E5F\u4F1A\u6709 didupdate didmount unmount\u3002</li></ul><h2 id="\u4F18\u70B9" tabindex="-1"><a class="header-anchor" href="#\u4F18\u70B9" aria-hidden="true">#</a> \u4F18\u70B9</h2><ul><li>[ ] \u6570\u636E\u8BA2\u9605\u9897\u7C92\u5EA6\u9AD8\uFF0C\u4E0D\u7528\u523B\u610F\u7EF4\u62A4\u6027\u80FD oop \u597D\u4E0A\u624B\uFF0C\u5C11\u4E9B\u4EE3\u7801</li></ul><h2 id="\u601D\u8003\u{1F914}" tabindex="-1"><a class="header-anchor" href="#\u601D\u8003\u{1F914}" aria-hidden="true">#</a> \u601D\u8003\u{1F914}</h2><ul><li>\u4EC0\u4E48\u65F6\u5019\u7528\u5355\u4F8B</li><li>\u4EC0\u4E48\u65F6\u5019\u7528 class</li><li>\u4EC0\u4E48\u65F6\u5019\u6CE8\u5165\u5230</li><li>toJS</li><li>observer \u7528\u7684\u8D8A\u591A\uFF0C\u6548\u7387\u8D8A\u9AD8\uFF0C\u4F46\u662F\u4F1A\u5F3A\u4F9D\u8D56 mobx</li></ul><h2 id="mobx-\u62D3\u5C55" tabindex="-1"><a class="header-anchor" href="#mobx-\u62D3\u5C55" aria-hidden="true">#</a> Mobx \u62D3\u5C55</h2><ul><li>https://egghead.io/lessons/javascript-sync-the-ui-with-the-app-state-using-mobx-observable-and-observer-in-react \u6559\u7A0B</li><li>https://blog.cloudboost.io/3-reasons-why-i-stopped-using-react-setstate-ab73fc67a42e</li><li>spy vs logger</li><li>\u65F6\u95F4\u56DE\u6EAF https://github.com/mobxjs/mobx-state-tree</li><li>\u5982\u4F55\u5B9E\u73B0\u7684\u4F9D\u8D56\u6536\u96C6\uFF0CReact \u751F\u547D\u5468\u671F\u7981\u7528</li></ul><h1 id="mobx-redux-\u6BD4\u8F83" tabindex="-1"><a class="header-anchor" href="#mobx-redux-\u6BD4\u8F83" aria-hidden="true">#</a> Mobx\uFF0CRedux \u6BD4\u8F83</h1><h2 id="\u793E\u533A" tabindex="-1"><a class="header-anchor" href="#\u793E\u533A" aria-hidden="true">#</a> \u793E\u533A</h2><p><img src="https://user-images.githubusercontent.com/18378034/34917681-bf8dba22-f984-11e7-9d1f-713563827c24.png" alt="image"></p><p>\u4F7F\u7528\u5EA6\u5173\u6CE8\u5EA6\uFF0Credux \u66F4\u591A\uFF0C\u793E\u533A redux \u4E5F\u662F\u5B8C\u80DC\u3002</p><h2 id="\u7B80\u5355\u5BF9\u6BD4" tabindex="-1"><a class="header-anchor" href="#\u7B80\u5355\u5BF9\u6BD4" aria-hidden="true">#</a> \u7B80\u5355\u5BF9\u6BD4</h2><ul><li>fp vs oop</li><li>Elm vs \u4F9D\u8D56\u6536\u96C6 + \u54CD\u5E94\u5F0F</li><li>\u5355\u4E00\u6570\u636E\u6E90 vs \u591A\u4E2A store</li><li>Readonly vs read &amp; write</li><li>Plain objects vs observable data</li><li>smart + dumb vs smart</li></ul><h2 id="\u603B\u7ED3" tabindex="-1"><a class="header-anchor" href="#\u603B\u7ED3" aria-hidden="true">#</a> \u603B\u7ED3</h2><ul><li>mobx api \u7B80\u5355\uFF0C\u6837\u677F\u4EE3\u7801\u5C11</li><li>redux \u9700\u8981\u6CE8\u610F\u7684\u633A\u591A\uFF0Cmobx \u9700\u8981\u5BF9\u4F9D\u8D56\u6536\u96C6\u7406\u89E3</li><li>Redux \u89C4\u8303 state\uFF0Cmobx \u4E0D\u62C5\u5FC3\u5D4C\u5957</li><li>\u6027\u80FD\u65B9\u9762\u3002\u8C03\u4F18\u8FC7\u7684 redux \u9879\u76EE\u57FA\u672C\u8DDF mobx \u6253\u5E73\u3002</li><li>Effect\u3002saga \u5C01\u88C5\u7684\u4E1A\u52A1\u573A\u666F\uFF0Cmobx \u6CA1\u6709\u4E2D\u95F4\u4EF6\uFF0C\u4E0D\u5BB9\u6613\u62D3\u5C55\u3002</li><li>\u793E\u533A\u3002redux \u5B8C\u80DC \u9009\u54EA\u4E2A\u5462\uFF1F</li></ul><h1 id="\u6700\u540E" tabindex="-1"><a class="header-anchor" href="#\u6700\u540E" aria-hidden="true">#</a> \u6700\u540E</h1><p>\u867D\u7136\u901A\u8FC7\u4E00\u4E9B redux \u7684\u95EE\u9898\uFF0C\u53BB\u5F15\u51FA mobx\uFF0C\u4F46\u662F\u5E76\u4E0D\u610F\u5473\u7740 redux \u5C31\u662F\u4E0D\u597D\u7684\u3002\u9996\u5148\u6BCF\u4E2A\u6280\u672F\u6808\u90FD\u662F\u6839\u636E\u573A\u666F\uFF0C\u56E2\u961F\u9700\u8981\u53BB\u9009\u62E9\u7684\u3002\u53E6\u5916\uFF0C\u624B\u52A8\u8C03\u4F18\u7684\u5DE5\u4F5C\u4E0D\u4EC5\u4EC5\u662F view \u5C42\u7684\u5E94\u7528\u4E2D\uFF0C\u800C\u662F\u6574\u4E2A\u524D\u7AEF\u7684\u94FE\u8DEF\u90FD\u662F\u9700\u8981\u7684\uFF0C\u4E5F\u6CA1\u6709\u5B8C\u7F8E\u7684\u3001\u4E00\u52B3\u6C38\u9038\u7684\u65B9\u6848\uFF0C\u53EA\u6709\u81EA\u5DF1\u4E0D\u65AD\u7684\u5B66\u4E60\u548C\u4F18\u5316\uFF0C\u624D\u80FD\u66F4\u5FEB\u7684\u8FDB\u6B65\u3002</p><h1 id="\u62D3\u5C55" tabindex="-1"><a class="header-anchor" href="#\u62D3\u5C55" aria-hidden="true">#</a> \u62D3\u5C55</h1><p>https://www.youtube.com/watch?v=xsSnOQynTHs redux \u81EA\u6B64\u5F00\u59CB\u706B</p><p>https://zhuanlan.zhihu.com/p/25989654 conf MobX vs Redux</p>`,39),Ce={href:"https://github.com/xufei/blog/issues/47",target:"_blank",rel:"noopener noreferrer"},we=t("xufei/blog#47"),Re=t(" \u5355\u9875\u6570\u636E\u6D41\u65B9\u6848\u63A2\u7D22\uFF0Crxjs"),ye=e("p",null,"#21 redux \u4E2D\u95F4\u4EF6",-1),Ee=e("p",null,"https://medium.com/@mweststrate/how-to-safely-use-react-context-b7e343eff076",-1);function Se(je,Ae){const a=o("ExternalLinkIcon");return r(),c(i,null,[u,e("p",null,[d,e("a",h,[b,s(a)]),m,x]),f,_,g,k,v,e("p",null,[C,e("a",w,[R,s(a)]),y]),E,S,j,e("p",null,[A,e("a",P,[D,s(a)]),T]),F,z,e("p",null,[I,e("a",M,[V,s(a)]),U]),B,e("ul",null,[e("li",null,[N,e("a",J,[L,s(a)])]),O,Q,q,H,W]),X,e("ul",null,[e("li",null,[G,K,Y,e("a",Z,[$,s(a)])]),ee,e("li",null,[te,e("a",ae,[se,s(a)]),ne]),oe]),re,e("p",null,[ce,e("a",ie,[le,s(a)]),pe]),ue,de,he,be,me,xe,e("ul",null,[e("li",null,[fe,e("a",_e,[ge,s(a)]),ke])]),ve,e("p",null,[e("a",Ce,[we,s(a)]),Re]),ye,Ee],64)}var Te=l(p,[["render",Se]]);export{Te as default};
