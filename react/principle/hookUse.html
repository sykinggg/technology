<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.36">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title></title><meta name="description" content="君子藏器于身 待时而动 天下有道则见 无道则隐">
    <link rel="modulepreload" href="/technology/assets/app.b05da4ec.js"><link rel="modulepreload" href="/technology/assets/hookUse.html.f07e07c1.js"><link rel="modulepreload" href="/technology/assets/hookUse.html.4d2cf78f.js"><link rel="modulepreload" href="/technology/assets/plugin-vue_export-helper.21dcd24c.js">
    <link rel="stylesheet" href="/technology/assets/style.5f6eabfb.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/technology/" class=""><img class="logo" src="https://vuejs.org/images/logo.png" alt><!----></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="技术"><span class="title">技术</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="技术"><span class="title">技术</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/technology/technology/base.md" class="" aria-label="技术前瞻"><!--[--><!--]--> 技术前瞻 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="js"><span class="title">js</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="js"><span class="title">js</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/technology/mozillajs/baseObject/symbol.md" class="" aria-label="mozilla：基本对象"><!--[--><!--]--> mozilla：基本对象 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/jsInterview/baseInterview.md" class="" aria-label="基础面试题"><!--[--><!--]--> 基础面试题 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/js/stack/executionStack.md" class="" aria-label="js 概念"><!--[--><!--]--> js 概念 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/ts/jsx/support" class="" aria-label="JSX"><!--[--><!--]--> JSX <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/ts/project/inDepthTs.md" class="" aria-label="TypeScript 项目"><!--[--><!--]--> TypeScript 项目 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/jsNews/es6News.md" class="" aria-label="js 新概念"><!--[--><!--]--> js 新概念 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="css"><span class="title">css</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="css"><span class="title">css</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/technology/mozillaCss/reference/universalSelectors.md" class="" aria-label="第 1 期：CSS API"><!--[--><!--]--> 第 1 期：CSS API <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/css/interview/baseCss.md" class="" aria-label="零散记录"><!--[--><!--]--> 零散记录 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="html"><span class="title">html</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="html"><span class="title">html</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/technology/html/interview/linkImport.md" class="" aria-label="零散记录"><!--[--><!--]--> 零散记录 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="端"><span class="title">端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="端"><span class="title">端</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/technology/browser/interview/baseInterview.md" class="" aria-label="基础浏览器"><!--[--><!--]--> 基础浏览器 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/http/interview/baseInterview.md" class="" aria-label="基础http"><!--[--><!--]--> 基础http <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工具"><span class="title">工具</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工具"><span class="title">工具</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/technology/webpack/interview/webpackInterview.md" class="" aria-label="webpack"><!--[--><!--]--> webpack <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/esbuild/description.md" class="" aria-label="esbuild"><!--[--><!--]--> esbuild <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/rollup/introduction.md" class="" aria-label="rollup"><!--[--><!--]--> rollup <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/git/indx.md" class="" aria-label="git"><!--[--><!--]--> git <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/nginx/base.md" class="" aria-label="nginx"><!--[--><!--]--> nginx <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/cli/base.md" class="" aria-label="cli"><!--[--><!--]--> cli <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/npm/commonlyUsed.md" class="" aria-label="npm"><!--[--><!--]--> npm <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="react"><span class="title">react</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="react"><span class="title">react</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/technology/ILoveDevelop/react/principle/base.md" class="" aria-label="react 源码阅读 代码视角"><!--[--><!--]--> react 源码阅读 代码视角 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/react/preparation/idea.md" class="" aria-label="react 源码阅读 思想视角"><!--[--><!--]--> react 源码阅读 思想视角 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/react-illustration-series/main/macro-structure.md" class="" aria-label="图解React源码"><!--[--><!--]--> 图解React源码 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/umi/interview/pluginDva.md" class="" aria-label="umi"><!--[--><!--]--> umi <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/reactInterview/interview1.md" class="" aria-label="整理"><!--[--><!--]--> 整理 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="vue"><span class="title">vue</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="vue"><span class="title">vue</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/technology/vue/prepare/flow.md" class="" aria-label="第 1 期：源码解读-准备工作"><!--[--><!--]--> 第 1 期：源码解读-准备工作 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/vue/data-driven/_index.md" class="" aria-label="第2期：源码解读-数据驱动"><!--[--><!--]--> 第2期：源码解读-数据驱动 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/vue/components/create-component.md" class="" aria-label="第3期：源码解读-组件化"><!--[--><!--]--> 第3期：源码解读-组件化 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/vue/reactive/reactive-object.md" class="" aria-label="第4期：源码解读-深入响应式原理"><!--[--><!--]--> 第4期：源码解读-深入响应式原理 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/vue/compile/entrance.md" class="" aria-label="第5期：源码解读-编译"><!--[--><!--]--> 第5期：源码解读-编译 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/vue/extend/event.md" class="" aria-label="第6期：源码解读-扩展"><!--[--><!--]--> 第6期：源码解读-扩展 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/vue/vue-router/install.md" class="" aria-label="第7期：源码解读-VueRouter"><!--[--><!--]--> 第7期：源码解读-VueRouter <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/vue/vuex/idex.md" class="" aria-label="第8期：源码解读-Vuex"><!--[--><!--]--> 第8期：源码解读-Vuex <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/vue/interview/baseInterview.md" class="" aria-label="第9期：基础面试题"><!--[--><!--]--> 第9期：基础面试题 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="性能优化"><span class="title">性能优化</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="性能优化"><span class="title">性能优化</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/technology/performance/vue/vue2Base.md" class="" aria-label="vue-性能优化"><!--[--><!--]--> vue-性能优化 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/performance/react/reactBase.md" class="" aria-label="react-性能优化"><!--[--><!--]--> react-性能优化 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/performance/base/drag1.md" class="" aria-label="组件设计"><!--[--><!--]--> 组件设计 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="算法&amp;设计"><span class="title">算法&amp;设计</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="算法&amp;设计"><span class="title">算法&amp;设计</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/technology/algorithm/interview/baseInterview.md" class="" aria-label="第 1 期：基础面试题"><!--[--><!--]--> 第 1 期：基础面试题 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/design/overview.md" class="" aria-label="设计模式"><!--[--><!--]--> 设计模式 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/designFrame/jquery.md" class="" aria-label="设计应用"><!--[--><!--]--> 设计应用 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="技术"><span class="title">技术</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="技术"><span class="title">技术</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/technology/technology/base.md" class="" aria-label="技术前瞻"><!--[--><!--]--> 技术前瞻 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="js"><span class="title">js</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="js"><span class="title">js</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/technology/mozillajs/baseObject/symbol.md" class="" aria-label="mozilla：基本对象"><!--[--><!--]--> mozilla：基本对象 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/jsInterview/baseInterview.md" class="" aria-label="基础面试题"><!--[--><!--]--> 基础面试题 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/js/stack/executionStack.md" class="" aria-label="js 概念"><!--[--><!--]--> js 概念 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/ts/jsx/support" class="" aria-label="JSX"><!--[--><!--]--> JSX <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/ts/project/inDepthTs.md" class="" aria-label="TypeScript 项目"><!--[--><!--]--> TypeScript 项目 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/jsNews/es6News.md" class="" aria-label="js 新概念"><!--[--><!--]--> js 新概念 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="css"><span class="title">css</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="css"><span class="title">css</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/technology/mozillaCss/reference/universalSelectors.md" class="" aria-label="第 1 期：CSS API"><!--[--><!--]--> 第 1 期：CSS API <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/css/interview/baseCss.md" class="" aria-label="零散记录"><!--[--><!--]--> 零散记录 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="html"><span class="title">html</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="html"><span class="title">html</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/technology/html/interview/linkImport.md" class="" aria-label="零散记录"><!--[--><!--]--> 零散记录 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="端"><span class="title">端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="端"><span class="title">端</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/technology/browser/interview/baseInterview.md" class="" aria-label="基础浏览器"><!--[--><!--]--> 基础浏览器 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/http/interview/baseInterview.md" class="" aria-label="基础http"><!--[--><!--]--> 基础http <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工具"><span class="title">工具</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工具"><span class="title">工具</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/technology/webpack/interview/webpackInterview.md" class="" aria-label="webpack"><!--[--><!--]--> webpack <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/esbuild/description.md" class="" aria-label="esbuild"><!--[--><!--]--> esbuild <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/rollup/introduction.md" class="" aria-label="rollup"><!--[--><!--]--> rollup <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/git/indx.md" class="" aria-label="git"><!--[--><!--]--> git <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/nginx/base.md" class="" aria-label="nginx"><!--[--><!--]--> nginx <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/cli/base.md" class="" aria-label="cli"><!--[--><!--]--> cli <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/npm/commonlyUsed.md" class="" aria-label="npm"><!--[--><!--]--> npm <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="react"><span class="title">react</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="react"><span class="title">react</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/technology/ILoveDevelop/react/principle/base.md" class="" aria-label="react 源码阅读 代码视角"><!--[--><!--]--> react 源码阅读 代码视角 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/react/preparation/idea.md" class="" aria-label="react 源码阅读 思想视角"><!--[--><!--]--> react 源码阅读 思想视角 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/react-illustration-series/main/macro-structure.md" class="" aria-label="图解React源码"><!--[--><!--]--> 图解React源码 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/umi/interview/pluginDva.md" class="" aria-label="umi"><!--[--><!--]--> umi <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/reactInterview/interview1.md" class="" aria-label="整理"><!--[--><!--]--> 整理 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="vue"><span class="title">vue</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="vue"><span class="title">vue</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/technology/vue/prepare/flow.md" class="" aria-label="第 1 期：源码解读-准备工作"><!--[--><!--]--> 第 1 期：源码解读-准备工作 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/vue/data-driven/_index.md" class="" aria-label="第2期：源码解读-数据驱动"><!--[--><!--]--> 第2期：源码解读-数据驱动 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/vue/components/create-component.md" class="" aria-label="第3期：源码解读-组件化"><!--[--><!--]--> 第3期：源码解读-组件化 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/vue/reactive/reactive-object.md" class="" aria-label="第4期：源码解读-深入响应式原理"><!--[--><!--]--> 第4期：源码解读-深入响应式原理 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/vue/compile/entrance.md" class="" aria-label="第5期：源码解读-编译"><!--[--><!--]--> 第5期：源码解读-编译 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/vue/extend/event.md" class="" aria-label="第6期：源码解读-扩展"><!--[--><!--]--> 第6期：源码解读-扩展 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/vue/vue-router/install.md" class="" aria-label="第7期：源码解读-VueRouter"><!--[--><!--]--> 第7期：源码解读-VueRouter <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/vue/vuex/idex.md" class="" aria-label="第8期：源码解读-Vuex"><!--[--><!--]--> 第8期：源码解读-Vuex <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/vue/interview/baseInterview.md" class="" aria-label="第9期：基础面试题"><!--[--><!--]--> 第9期：基础面试题 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="性能优化"><span class="title">性能优化</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="性能优化"><span class="title">性能优化</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/technology/performance/vue/vue2Base.md" class="" aria-label="vue-性能优化"><!--[--><!--]--> vue-性能优化 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/performance/react/reactBase.md" class="" aria-label="react-性能优化"><!--[--><!--]--> react-性能优化 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/performance/base/drag1.md" class="" aria-label="组件设计"><!--[--><!--]--> 组件设计 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="算法&amp;设计"><span class="title">算法&amp;设计</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="算法&amp;设计"><span class="title">算法&amp;设计</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/technology/algorithm/interview/baseInterview.md" class="" aria-label="第 1 期：基础面试题"><!--[--><!--]--> 第 1 期：基础面试题 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/design/overview.md" class="" aria-label="设计模式"><!--[--><!--]--> 设计模式 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/designFrame/jquery.md" class="" aria-label="设计应用"><!--[--><!--]--> 设计应用 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">第 1 期：React理念 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/technology/react/preparation/idea.md" class="sidebar-item" aria-label="React理念"><!--[--><!--]--> React理念 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/preparation/oldConstructure.md" class="sidebar-item" aria-label="老的React架构"><!--[--><!--]--> 老的React架构 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/preparation/newConstructure.md" class="sidebar-item" aria-label="新的React架构"><!--[--><!--]--> 新的React架构 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/process/fiber-mental.md" class="sidebar-item" aria-label="Fiber架构的心智模型"><!--[--><!--]--> Fiber架构的心智模型 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/process/fiber.md" class="sidebar-item" aria-label="Fiber架构的实现原理"><!--[--><!--]--> Fiber架构的实现原理 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/process/doubleBuffer.md" class="sidebar-item" aria-label="Fiber架构的工作原理"><!--[--><!--]--> Fiber架构的工作原理 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/preparation/summary.md" class="sidebar-item" aria-label="总结"><!--[--><!--]--> 总结 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">第2期：前置知识 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/technology/react/preparation/file.md" class="sidebar-item" aria-label="源码的文件结构"><!--[--><!--]--> 源码的文件结构 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/preparation/source.md" class="sidebar-item" aria-label="调试源码"><!--[--><!--]--> 调试源码 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/preparation/jsx.md" class="sidebar-item" aria-label="深入理解JSX"><!--[--><!--]--> 深入理解JSX <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">第3期：render阶段 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/technology/react/process/reconciler.md" class="sidebar-item" aria-label="流程概览"><!--[--><!--]--> 流程概览 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/process/beginWork.md" class="sidebar-item" aria-label="beginWork"><!--[--><!--]--> beginWork <!--[--><!--]--></a><!----></li><li><a href="/technology/react/process/completeWork.md" class="sidebar-item" aria-label="completeWork"><!--[--><!--]--> completeWork <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">第4期：commit阶段 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/technology/react/renderer/prepare.md" class="sidebar-item" aria-label="流程概览"><!--[--><!--]--> 流程概览 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/renderer/beforeMutation.md" class="sidebar-item" aria-label="beforemutation阶段"><!--[--><!--]--> beforemutation阶段 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/renderer/mutation.md" class="sidebar-item" aria-label="mutation阶段"><!--[--><!--]--> mutation阶段 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/renderer/layout.md" class="sidebar-item" aria-label="layout阶段"><!--[--><!--]--> layout阶段 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">第5期：Diff算法 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/technology/react/diff/prepare.md" class="sidebar-item" aria-label="概览"><!--[--><!--]--> 概览 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/diff/one.md" class="sidebar-item" aria-label="单节点Diff"><!--[--><!--]--> 单节点Diff <!--[--><!--]--></a><!----></li><li><a href="/technology/react/diff/multi.md" class="sidebar-item" aria-label="多节点Diff"><!--[--><!--]--> 多节点Diff <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">第6期：状态更新 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/technology/react/state/prepare.md" class="sidebar-item" aria-label="流程概览"><!--[--><!--]--> 流程概览 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/state/mental.md" class="sidebar-item" aria-label="心智模型"><!--[--><!--]--> 心智模型 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/state/update.md" class="sidebar-item" aria-label="Update"><!--[--><!--]--> Update <!--[--><!--]--></a><!----></li><li><a href="/technology/react/state/priority.md" class="sidebar-item" aria-label="深入理解优先级"><!--[--><!--]--> 深入理解优先级 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/state/reactdom.md" class="sidebar-item" aria-label="ReactDOM.render"><!--[--><!--]--> ReactDOM.render <!--[--><!--]--></a><!----></li><li><a href="/technology/react/state/setstate.md" class="sidebar-item" aria-label="this.setState"><!--[--><!--]--> this.setState <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">第7期：Hooks <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/technology/react/hooks/prepare.md" class="sidebar-item" aria-label="Hooks理念"><!--[--><!--]--> Hooks理念 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/hooks/create.md" class="sidebar-item" aria-label="极简Hooks实现"><!--[--><!--]--> 极简Hooks实现 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/hooks/structure.md" class="sidebar-item" aria-label="Hooks数据结构"><!--[--><!--]--> Hooks数据结构 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/hooks/usestate.md" class="sidebar-item" aria-label="useState与useReducer"><!--[--><!--]--> useState与useReducer <!--[--><!--]--></a><!----></li><li><a href="/technology/react/hooks/useeffect.md" class="sidebar-item" aria-label="useEffect"><!--[--><!--]--> useEffect <!--[--><!--]--></a><!----></li><li><a href="/technology/react/hooks/useref.md" class="sidebar-item" aria-label="useRef"><!--[--><!--]--> useRef <!--[--><!--]--></a><!----></li><li><a href="/technology/react/hooks/usememo.md" class="sidebar-item" aria-label="useMemo与useCallback"><!--[--><!--]--> useMemo与useCallback <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">第8期：ConcurrentMode <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/technology/react/concurrent/prepare.md" class="sidebar-item" aria-label="概览"><!--[--><!--]--> 概览 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/concurrent/scheduler.md" class="sidebar-item" aria-label="Scheduler的原理与实现"><!--[--><!--]--> Scheduler的原理与实现 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/concurrent/lane.md" class="sidebar-item" aria-label="lane模型"><!--[--><!--]--> lane模型 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/concurrent/componentWillXXX.md" class="sidebar-item" aria-label="深入源码剖析componentWillXXX为什么UNSAFE"><!--[--><!--]--> 深入源码剖析componentWillXXX为什么UNSAFE <!--[--><!--]--></a><!----></li><li><a href="/technology/react/concurrent/redux.html" class="sidebar-item" aria-label="redux 源码解读"><!--[--><!--]--> redux 源码解读 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">第9期：基础概念 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/technology/react/principle/basePrinciple.md" class="sidebar-item" aria-label="概述"><!--[--><!--]--> 概述 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/principle/componentApi.md" class="sidebar-item" aria-label="组件类-api"><!--[--><!--]--> 组件类-api <!--[--><!--]--></a><!----></li><li><a href="/technology/react/principle/toolApi.md" class="sidebar-item" aria-label="工具类-api"><!--[--><!--]--> 工具类-api <!--[--><!--]--></a><!----></li><li><a href="/technology/react/principle/hookApi.md" class="sidebar-item" aria-label="hooks-api"><!--[--><!--]--> hooks-api <!--[--><!--]--></a><!----></li><li><a href="/technology/react/principle/domApi.md" class="sidebar-item" aria-label="react-dom-api"><!--[--><!--]--> react-dom-api <!--[--><!--]--></a><!----></li><li><a href="/technology/react/principle/hookUse.md" class="sidebar-item active" aria-label="react-hook使用"><!--[--><!--]--> react-hook使用 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/principle/hookCustom.md" class="sidebar-item" aria-label="react-hook自定义"><!--[--><!--]--> react-hook自定义 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/principle/hookPrinciple.md" class="sidebar-item" aria-label="react-hook原理"><!--[--><!--]--> react-hook原理 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/principle/hoc.md" class="sidebar-item" aria-label="深入hoc"><!--[--><!--]--> 深入hoc <!--[--><!--]--></a><!----></li><li><a href="/technology/react/principle/reactRedux.md" class="sidebar-item" aria-label="React-redux源码"><!--[--><!--]--> React-redux源码 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/principle/reactKeeplive.md" class="sidebar-item" aria-label="react缓存页面"><!--[--><!--]--> react缓存页面 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/principle/reactRouter.md" class="sidebar-item" aria-label="react-router路由原理"><!--[--><!--]--> react-router路由原理 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">第10期：基础面试题 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/technology/react/interview/50/interview1.md" class="sidebar-item" aria-label="什么时候使用状态管理器?"><!--[--><!--]--> 什么时候使用状态管理器? <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview2.md" class="sidebar-item" aria-label="render函数中return如果没有使用()会有什么问题?"><!--[--><!--]--> render函数中return如果没有使用()会有什么问题? <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview3.md" class="sidebar-item" aria-label="componentWillUpdate可以直接修改state的值吗?"><!--[--><!--]--> componentWillUpdate可以直接修改state的值吗? <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview4.md" class="sidebar-item" aria-label="说说对React的渲染原理的理解?"><!--[--><!--]--> 说说对React的渲染原理的理解? <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview5.md" class="sidebar-item" aria-label="什么渲染劫持？"><!--[--><!--]--> 什么渲染劫持？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview6.md" class="sidebar-item" aria-label="ReactIntl？"><!--[--><!--]--> ReactIntl？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview7.md" class="sidebar-item" aria-label="Context？"><!--[--><!--]--> Context？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview12.md" class="sidebar-item" aria-label="Context实例？"><!--[--><!--]--> Context实例？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview8.md" class="sidebar-item" aria-label="RenderProps？"><!--[--><!--]--> RenderProps？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview9.md" class="sidebar-item" aria-label="高阶组件？"><!--[--><!--]--> 高阶组件？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview10.md" class="sidebar-item" aria-label="Refs转发？"><!--[--><!--]--> Refs转发？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview11.md" class="sidebar-item" aria-label="React顶层API？"><!--[--><!--]--> React顶层API？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview13.md" class="sidebar-item" aria-label="contextType？"><!--[--><!--]--> contextType？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview14.md" class="sidebar-item" aria-label="除了实例的属性可以获取Context外哪些地方还能直接获取Context？"><!--[--><!--]--> 除了实例的属性可以获取Context外哪些地方还能直接获取Context？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview15.md" class="sidebar-item" aria-label="Consumer？"><!--[--><!--]--> Consumer？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview16.md" class="sidebar-item" aria-label="windowing？"><!--[--><!--]--> windowing？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview17.md" class="sidebar-item" aria-label="ReactDOM-React的插槽(Portals)？"><!--[--><!--]--> ReactDOM-React的插槽(Portals)？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview18.md" class="sidebar-item" aria-label="React的插槽(Portals)？"><!--[--><!--]--> React的插槽(Portals)？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview19.md" class="sidebar-item" aria-label="构造函数？"><!--[--><!--]--> 构造函数？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview20.md" class="sidebar-item" aria-label="React拆分组件？"><!--[--><!--]--> React拆分组件？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview21.md" class="sidebar-item" aria-label="React的严格模式？"><!--[--><!--]--> React的严格模式？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview22.md" class="sidebar-item" aria-label="relay？"><!--[--><!--]--> relay？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview23.md" class="sidebar-item" aria-label="捕获错误？"><!--[--><!--]--> 捕获错误？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview24" class="sidebar-item" aria-label="如果组件的属性没有传值，那么它的默认值是什么？"><!--[--><!--]--> 如果组件的属性没有传值，那么它的默认值是什么？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview25.md" class="sidebar-item" aria-label="React的表单库？"><!--[--><!--]--> React的表单库？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview26.md" class="sidebar-item" aria-label="suspense组件？"><!--[--><!--]--> suspense组件？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview27.md" class="sidebar-item" aria-label="`super()`和`super(props)`？"><!--[--><!--]--> `super()`和`super(props)`？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview28.md" class="sidebar-item" aria-label="动态导入组件？"><!--[--><!--]--> 动态导入组件？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview29.md" class="sidebar-item" aria-label="给非控组件设置默认的值？"><!--[--><!--]--> 给非控组件设置默认的值？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview30.md" class="sidebar-item" aria-label="使用Hooks获取服务端数据？"><!--[--><!--]--> 使用Hooks获取服务端数据？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview31.md" class="sidebar-item" aria-label="render方法的原理？"><!--[--><!--]--> render方法的原理？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview32.md" class="sidebar-item" aria-label="使用Hooks？"><!--[--><!--]--> 使用Hooks？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview33.md" class="sidebar-item" aria-label="useEffect和useLayoutEffect？"><!--[--><!--]--> useEffect和useLayoutEffect？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview34.md" class="sidebar-item" aria-label="自定义组件时render是否为可选的？"><!--[--><!--]--> 自定义组件时render是否为可选的？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview35.md" class="sidebar-item" aria-label="React必须使用JSX？"><!--[--><!--]--> React必须使用JSX？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview36.md" class="sidebar-item" aria-label="需要把keys设置为全局唯一？"><!--[--><!--]--> 需要把keys设置为全局唯一？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview37.md" class="sidebar-item" aria-label="怎么定时更新一个组件？"><!--[--><!--]--> 怎么定时更新一个组件？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview38.md" class="sidebar-item" aria-label="使用webpack打包React项目优化？"><!--[--><!--]--> 使用webpack打包React项目优化？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview39.md" class="sidebar-item" aria-label="React根据不同的环境打包？"><!--[--><!--]--> React根据不同的环境打包？ <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview40.md" class="sidebar-item" aria-label="遍React的源码"><!--[--><!--]--> 遍React的源码 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview41.md" class="sidebar-item" aria-label="React.forwardRef"><!--[--><!--]--> React.forwardRef <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview42.md" class="sidebar-item" aria-label="React事件"><!--[--><!--]--> React事件 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview43.md" class="sidebar-item" aria-label="React的reconciliation（一致化算法）"><!--[--><!--]--> React的reconciliation（一致化算法） <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview44.md" class="sidebar-item" aria-label="Fragment|DOM元素|安全注入"><!--[--><!--]--> Fragment|DOM元素|安全注入 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview45.md" class="sidebar-item" aria-label="React中如何监听state"><!--[--><!--]--> React中如何监听state <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview46.md" class="sidebar-item" aria-label="为什么props复制给state会产生bug"><!--[--><!--]--> 为什么props复制给state会产生bug <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview47.md" class="sidebar-item" aria-label="React为什么不要直接修改state|ReactFiber"><!--[--><!--]--> React为什么不要直接修改state|ReactFiber <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview48.md" class="sidebar-item" aria-label="装饰器(Decorator)React"><!--[--><!--]--> 装饰器(Decorator)React <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview49.md" class="sidebar-item" aria-label="react手动清除|for和htmlFor"><!--[--><!--]--> react手动清除|for和htmlFor <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/50/interview50.md" class="sidebar-item" aria-label="React状态管理"><!--[--><!--]--> React状态管理 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/100/interview51.md" class="sidebar-item" aria-label="React新特性"><!--[--><!--]--> React新特性 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/100/interview52.md" class="sidebar-item" aria-label="React事件引用"><!--[--><!--]--> React事件引用 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/100/interview53.md" class="sidebar-item" aria-label="constructor和getInitialState|引入本地图片"><!--[--><!--]--> constructor和getInitialState|引入本地图片 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/100/interview54.md" class="sidebar-item" aria-label="ImmutableData"><!--[--><!--]--> ImmutableData <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/100/interview55.md" class="sidebar-item" aria-label="提高组件的渲染效率"><!--[--><!--]--> 提高组件的渲染效率 <!--[--><!--]--></a><!----></li><li><a href="/technology/react/interview/100/interview56.md" class="sidebar-item" aria-label="react推行函数式组件"><!--[--><!--]--> react推行函数式组件 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="" tabindex="-1"><a class="header-anchor" href="#" aria-hidden="true">#</a></h1><h1 id="react-hooks-使用" tabindex="-1"><a class="header-anchor" href="#react-hooks-使用" aria-hidden="true">#</a> react-hooks 使用</h1><h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述" aria-hidden="true">#</a> 概述</h2><blockquote><p>react-hooks是<strong>react16.8</strong>以后，react新增的钩子API</p></blockquote><ul><li><p>优点：</p></li><li><ol><li>react-hooks可以让的代码的逻辑性更强，可以<strong>抽离</strong>公共的方法，公共组件。</li></ol></li><li><ol start="2"><li>react-hooks思想更趋近于<strong>函数式编程</strong>。用函数声明方式代替class声明方式，虽说class也是es6构造函数语法糖，但是react-hooks写起来更有函数即组件，无疑也提高代码的开发效率（无需像class声明组件那样写声明周期，写生命周期render函数等）</li></ol></li><li><ol start="3"><li>react-hooks可能把庞大的class组件，化整为零成很多小组件，<code>useMemo</code>等方法让组件或者变量制定一个适合自己的<strong>独立的渲染空间</strong>，一定程度上可以提高性能，减少渲染次数。</li></ol></li></ul><h2 id="usestate-数据存储-派发更新" tabindex="-1"><a class="header-anchor" href="#usestate-数据存储-派发更新" aria-hidden="true">#</a> useState 数据存储，派发更新</h2><hr><ul><li><p><code>useState</code>出现，使得react无状态组件能够像有状态组件一样，可以拥有自己state,useState的参数可以是一个具体的值，也可以是一个函数用于判断复杂的逻辑，函数返回作为初始值</p></li><li><p><code>usestate</code> 返回一个数组，数组<code>第一项用于读取此时的state值</code> ，<code>第二项为派发数据更新</code>，组件渲染的函数，函数的参数即是需要更新的值。</p></li></ul><blockquote><p><code>useState</code>和<code>useReduce</code> 作为能够触发组件重新渲染的<code>hooks</code>,在使用<code>useState</code>的时候要特别注意的是，<code>useState</code>派发更新函数的执行，就会让<strong>整个function组件从头到尾执行一次</strong>，所以需要配合<code>useMemo</code>，<code>usecallback</code>等api配合使用</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">DemoState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   <span class="token comment">/* number为此时state读取值 ，setNumber为派发更新的函数 */</span>
   <span class="token keyword">let</span> <span class="token punctuation">[</span>number<span class="token punctuation">,</span> setNumber<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">/* 0为初始值 */</span>
   <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span> number <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         <span class="token function">setNumber</span><span class="token punctuation">(</span>number<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span> <span class="token comment">/* 这里的number是不能够即使改变的  */</span>
       <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><p>上边简单的例子说明了<code>useState</code> ,但是当在调用更新函数之后，<code>state</code>的值是不能即时改变的，只有当下一次上下文执行的时候，<code>state</code>值才随之改变。</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> a <span class="token operator">=</span><span class="token number">1</span> 
<span class="token keyword">const</span> <span class="token function-variable function">DemoState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   <span class="token comment">/*  useState 第一个参数如果是函数 则处理复杂的逻辑 ，返回值为初始值 */</span>
   <span class="token keyword">let</span> <span class="token punctuation">[</span>number<span class="token punctuation">,</span> setNumber<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      <span class="token comment">// number</span>
      <span class="token keyword">return</span> a<span class="token operator">===</span><span class="token number">1</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">2</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">/* 1为初始值 */</span>
   <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span> number <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token function">setNumber</span><span class="token punctuation">(</span>number<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="_2-useeffect-组件更新副作用钩子" tabindex="-1"><a class="header-anchor" href="#_2-useeffect-组件更新副作用钩子" aria-hidden="true">#</a> 2 useEffect 组件更新副作用钩子</h2><hr><p>如果你想在function组件中，当组件完成挂载，dom渲染完成，做一些操纵dom,请求数据，那么useEffect是一个不二选择，如果需要在组件初次渲染的时候请求数据，那么useEffect可以充当class组件中的 componentDidMount</p><p><strong>但是特别注意的是，如果不给<code>useEffect</code>执行加入限定条件，函数组件每一次更新都会触发effect ,那么也就说明每一次state更新，或是props的更新都会触发useEffect执行，此时的effect又充当了<code>componentDidUpdate</code>和<code>componentwillreceiveprops</code>，所以说合理的用于useEffect就要给effect加入限定执行的条件，也就是useEffect的第二个参数，这里说是限定条件，也可以说是上一次useeffect更新收集的某些记录数据变化的记忆，在新的一轮更新，<code>useeffect会拿出之前的记忆值和当前值做对比，如果发生了变化就执行新的一轮useEffect的副作用函数，useEffect第二个参数是一个数组，用来收集多个限制条件</code> 。</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/* 模拟数据交互 */</span>
<span class="token keyword">function</span> <span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> 
           <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
               <span class="token literal-property property">name</span><span class="token operator">:</span>a<span class="token punctuation">,</span>
               <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">16</span><span class="token punctuation">,</span>
           <span class="token punctuation">}</span><span class="token punctuation">)</span> 
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">Demo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> a <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span> userMessage <span class="token punctuation">,</span> setUserMessage <span class="token punctuation">]</span> <span class="token operator">:</span>any<span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> div<span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>number<span class="token punctuation">,</span> setNumber<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token comment">/* 模拟事件监听处理函数 */</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handleResize</span> <span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token comment">/* useEffect使用 ，这里如果不加限制 ，会是函数重复执行，陷入死循环*/</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token comment">/* 请求数据 */</span>
       <span class="token function">getUserInfo</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
           <span class="token function">setUserMessage</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
       <span class="token punctuation">}</span><span class="token punctuation">)</span>
       <span class="token comment">/* 操作dom  */</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>current<span class="token punctuation">)</span> <span class="token comment">/* div */</span>
       <span class="token comment">/* 事件监听等 */</span>
        window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;resize&#39;</span><span class="token punctuation">,</span> handleResize<span class="token punctuation">)</span>
    <span class="token comment">/* 只有当props-&gt;a和state-&gt;number改变的时候 ,useEffect副作用函数重新执行 ，如果此时数组为空[]，证明函数只有在初始化的时候执行一次相当于componentDidMount */</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span> a <span class="token punctuation">,</span>number <span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div ref<span class="token operator">=</span><span class="token punctuation">{</span>div<span class="token punctuation">}</span> <span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span> userMessage<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span> userMessage<span class="token punctuation">.</span>age <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">{</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token function">setNumber</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token operator">&gt;</span><span class="token punctuation">{</span> number <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><blockquote><p>如果需要在组件销毁的阶段，做一些取消dom监听，清除定时器等操作，那么可以在useEffect函数第一个参数，结尾返回一个函数，用于清除这些副作用。相当与<code>componentWillUnmount</code>。</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">Demo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> a <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">/* 模拟事件监听处理函数 */</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handleResize</span> <span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
       <span class="token comment">/* 定时器 延时器等 */</span>
       <span class="token keyword">const</span> timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">666</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
       <span class="token comment">/* 事件监听 */</span>
       window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;resize&#39;</span><span class="token punctuation">,</span> handleResize<span class="token punctuation">)</span>
       <span class="token comment">/* 此函数用于清除副作用 */</span>
       <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
           <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span> 
           window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;resize&#39;</span><span class="token punctuation">,</span> handleResize<span class="token punctuation">)</span>
       <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span> a <span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div  <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><strong>异步 async effect</strong></p><blockquote><p><code>useEffect</code>是不能直接用 <code>async await</code> 语法糖的</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/* 错误用法 ，effect不支持直接 async await 装饰的 */</span>
 <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token comment">/* 请求数据 */</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getUserInfo</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span> a <span class="token punctuation">,</span>number <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>如果想要用 <code>async effect</code> 可以对<code>effect</code>进行一层包装</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">asyncEffect</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> deps</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
   <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
       <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>deps<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_3-uselayouteffect-渲染更新之前的-useeffect" tabindex="-1"><a class="header-anchor" href="#_3-uselayouteffect-渲染更新之前的-useeffect" aria-hidden="true">#</a> 3 useLayoutEffect 渲染更新之前的 useEffect</h2><hr><p><code>useEffect</code> 执行顺序 组件更新挂载完成 -&gt; 浏览器<code>dom</code> 绘制完成 -&gt; 执行<code>useEffect</code>回调 。</p><p><code>useLayoutEffect</code> 执行顺序 组件更新挂载完成 -&gt; 执行<code>useLayoutEffect</code>回调-&gt; 浏览器<code>dom</code> 绘制完成</p><p><strong>所以说<code>useLayoutEffect</code> 代码可能会阻塞浏览器的绘制 如果在<code>useEffect</code> 重新请求数据，渲染视图过程中，肯定会造成画面闪动的效果,而如果用<code>useLayoutEffect</code> ，回调函数的代码就会阻塞浏览器绘制，所以可定会引起画面卡顿等效果，那么具体要用 <code>useLayoutEffect</code> 还是 <code>useEffect</code> ，要看实际项目的情况，大部分的情况 <code>useEffect</code> 都可以满足的。</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">DemoUseLayoutEffect</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">useLayoutEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">/*需要在dom绘制之前，移动dom到制定位置*/</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> x <span class="token punctuation">,</span>y <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">getPositon</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">/* 获取要移动的 x,y坐标 */</span>
        <span class="token function">animate</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>current<span class="token punctuation">,</span><span class="token punctuation">{</span> x<span class="token punctuation">,</span>y <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div <span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span ref<span class="token operator">=</span><span class="token punctuation">{</span> target <span class="token punctuation">}</span> className<span class="token operator">=</span><span class="token string">&quot;animate&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_4-useref-获取元素-缓存数据" tabindex="-1"><a class="header-anchor" href="#_4-useref-获取元素-缓存数据" aria-hidden="true">#</a> 4 useRef 获取元素 ,缓存数据</h2><p>和传统的<code>class</code>组件<code>ref</code>一样，<code>react-hooks</code> 也提供获取元素方法 <code>useRef</code>,它有一个参数可以作为缓存数据的初始值，返回值可以被<code>dom</code>元素<code>ref</code>标记，可以获取被标记的元素节点.</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> <span class="token function-variable function">DemoUseRef</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> dom<span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handerSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token comment">/*  &lt;div &gt;表单组件&lt;/div&gt;  dom 节点 */</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dom<span class="token punctuation">.</span>current<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token comment">/* ref 标记当前dom节点 */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>dom<span class="token punctuation">}</span></span> <span class="token punctuation">&gt;</span></span><span class="token plain-text">表单组件</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token function">handerSubmit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">&gt;</span></span><span class="token plain-text">提交</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> 
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>高阶用法 缓存数据</strong></p><p><strong>当然<code>useRef</code>还有一个很重要的作用就是缓存数据，知道<code>usestate</code> ,<code>useReducer</code> 是可以保存当前的数据源的，但是如果它们更新数据源的函数执行必定会带来整个组件从新执行到渲染，如果在函数组件内部声明变量，则下一次更新也会重置，如果想要悄悄的保存数据，而又不想触发函数的更新，那么<code>useRef</code>是一个很棒的选择。</strong></p><blockquote><p>** const currenRef = useRef(InitialData)</p></blockquote><p>获取 <code>currenRef.current</code> 改变 <code>currenRef.current = newValue</code></p><p><code>useRef</code>可以第一个参数可以用来初始化保存数据，这些数据可以在<code>current</code>属性上获取到 ，当然也可以通过对<code>current</code>赋值新的数据源。</p><p><strong>下面通过react-redux源码来看看useRef的巧妙运用</strong></p><p>（<code>react-redux</code> 在<code>react-hooks</code>发布后，用<code>react-hooks</code>重新了其中的<code>Provide</code>,<code>connectAdvanced</code>）核心模块，可以见得 <code>react-hooks</code>在限制数据更新，高阶组件上有这一定的优势，其源码大量运用<code>useMemo</code>来做数据判定</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/* 这里用到的useRef没有一个是绑定在dom元素上的，都是做数据缓存用的 */</span>
<span class="token comment">/* react-redux 用userRef 来缓存 merge之后的 props */</span>
<span class="token keyword">const</span> lastChildProps <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//  lastWrapperProps 用 useRef 来存放组件真正的 props信息</span>
<span class="token keyword">const</span> lastWrapperProps <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span>wrapperProps<span class="token punctuation">)</span>
<span class="token comment">//是否储存props是否处于正在更新状态</span>
<span class="token keyword">const</span> renderIsScheduled <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>这是<code>react-redux</code>中用<code>useRef</code> 对数据做的缓存，那么怎么做更新的呢 ，接下来看</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//获取包装的props </span>
<span class="token keyword">function</span> <span class="token function">captureWrapperProps</span><span class="token punctuation">(</span>
  <span class="token parameter">lastWrapperProps<span class="token punctuation">,</span>
  lastChildProps<span class="token punctuation">,</span>
  renderIsScheduled<span class="token punctuation">,</span>
  wrapperProps<span class="token punctuation">,</span>
  actualChildProps<span class="token punctuation">,</span>
  childPropsFromStoreUpdate<span class="token punctuation">,</span>
  notifyNestedSubs</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">//要捕获包装props和子props，以便稍后进行比较</span>
  lastWrapperProps<span class="token punctuation">.</span>current <span class="token operator">=</span> wrapperProps  <span class="token comment">//子props </span>
  lastChildProps<span class="token punctuation">.</span>current <span class="token operator">=</span> actualChildProps <span class="token comment">//经过  merge props 之后形成的 prop</span>
  renderIsScheduled<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token boolean">false</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>通过上面可以看到 ，<code>react-redux</code> 用重新赋值的方法，改变缓存的数据源，避免不必要的数据更新，<strong>如果选用useState储存数据，必然促使组件重新渲染 所以采用了useRef解决了这个问题</strong></p><h2 id="_5-usecontext-自由获取context" tabindex="-1"><a class="header-anchor" href="#_5-usecontext-自由获取context" aria-hidden="true">#</a> 5 useContext 自由获取context</h2><hr><p>可以使用<code>useContext</code> ，来获取父级组件传递过来的<code>context</code>值，这个当前值就是最近的父级组件 <code>Provider</code> 设置的<code>value</code>值，<code>useContext</code>参数一般是由 <code>createContext</code> 方式引入 ,也可以父级上下文<code>context</code>传递 ( 参数为<code>context</code> )。<code>useContext</code> 可以代替 <code>context.Consumer</code> 来获取<code>Provider</code>中保存的<code>value</code>值</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/* 用useContext方式 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">DemoContext</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token literal-property property">value</span><span class="token operator">:</span>any <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>Context<span class="token punctuation">)</span>
    <span class="token comment">/* my name is alien */</span>
<span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span> my name is <span class="token punctuation">{</span> value<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 用Context.Consumer 方式 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">DemoContext1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>Context<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
         <span class="token punctuation">{</span><span class="token comment">/*  my name is alien  */</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span> my name is <span class="token punctuation">{</span> value<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Context<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Context<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;alien&#39;</span> <span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>DemoContext <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>DemoContext1 <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Context<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="_6-usereducer-无状态组件中的redux" tabindex="-1"><a class="header-anchor" href="#_6-usereducer-无状态组件中的redux" aria-hidden="true">#</a> 6 useReducer 无状态组件中的redux</h2><hr><p><code>useReducer</code> 是<code>react-hooks</code>提供的能够在无状态组件中运行的类似<code>redux</code>的功能<code>api</code></p><p>可以通过中间件的方式来增强<code>dispatch</code> <code>redux-thunk</code> <code>redux-sage</code> <code>redux-action</code> <code>redux-promise</code>都是比较不错的中间件，可以把<strong>同步</strong>reducer编程<strong>异步</strong>的reducer。</p><p>useReducer 接受的第一个参数是一个函数，可以认为它就是一个reducer ,reducer的参数就是常规reducer里面的state和action,返回改变后的state, useReducer第二个参数为state的初始值 返回一个数组，<strong>数组的第一项就是更新之后<code>state</code>的值</strong> ，<strong>第二个参数是派发更新的<code>dispatch</code>函数</strong> 。</p><p><strong><code>dispatch</code> 的触发会触发组件的更新，这里能够促使组件从新的渲染的一个是<code>useState</code>派发更新函数，另一个就 <code>useReducer</code>中的<code>dispatch</code></strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">DemoUseReducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">/* number为更新后的state值,  dispatchNumbner 为当前的派发函数 */</span>
   <span class="token keyword">const</span> <span class="token punctuation">[</span> number <span class="token punctuation">,</span> dispatchNumbner <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>action</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
       <span class="token keyword">const</span> <span class="token punctuation">{</span> payload <span class="token punctuation">,</span> name  <span class="token punctuation">}</span> <span class="token operator">=</span> action
       <span class="token comment">/* return的值为新的state */</span>
       <span class="token keyword">switch</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">{</span>
           <span class="token keyword">case</span> <span class="token string">&#39;add&#39;</span><span class="token operator">:</span>
               <span class="token keyword">return</span> state <span class="token operator">+</span> <span class="token number">1</span>
           <span class="token keyword">case</span> <span class="token string">&#39;sub&#39;</span><span class="token operator">:</span>
               <span class="token keyword">return</span> state <span class="token operator">-</span> <span class="token number">1</span> 
           <span class="token keyword">case</span> <span class="token string">&#39;reset&#39;</span><span class="token operator">:</span>
             <span class="token keyword">return</span> payload       
       <span class="token punctuation">}</span>
       <span class="token keyword">return</span> state
   <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
   <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      当前值：<span class="token punctuation">{</span> number <span class="token punctuation">}</span>
      <span class="token punctuation">{</span> <span class="token comment">/* 派发更新 */</span> <span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token function">dispatchNumbner</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;add&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">&gt;</span>增加<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token function">dispatchNumbner</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;sub&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">&gt;</span>减少<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token function">dispatchNumbner</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;reset&#39;</span> <span class="token punctuation">,</span><span class="token literal-property property">payload</span><span class="token operator">:</span><span class="token number">666</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">&gt;</span>赋值<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span> <span class="token comment">/* 把dispatch 和 state 传递给子组件  */</span> <span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>MyChildren  dispatch<span class="token operator">=</span><span class="token punctuation">{</span> dispatchNumbner <span class="token punctuation">}</span> State<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> number <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="_7-usememo-小而香性能优化" tabindex="-1"><a class="header-anchor" href="#_7-usememo-小而香性能优化" aria-hidden="true">#</a> 7 useMemo 小而香性能优化</h2><hr><p>无状态组件的更新是从头到尾的更新</p><p><strong><code>class</code>声明的组件可以用<code>componentShouldUpdate</code>来限制更新次数，那么<code>memo</code>就是无状态组件的<code>ShouldUpdate</code> ， 而<code>useMemo</code>就是更为细小的<code>ShouldUpdate</code>单元</strong></p><p>先来看看<code>memo</code> ,<code>memo</code>的作用结合了<code>pureComponent</code>纯组件和 <code>componentShouldUpdate</code>功能，会对传进来的<code>props</code>进行一次对比，然后根据第二个函数返回值来进一步判断哪些<code>props</code>需要更新</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/* memo包裹的组件，就给该组件加了限制更新的条件，是否更新取决于memo第二个参数返回的boolean值， */</span>
<span class="token keyword">const</span> DemoMemo <span class="token operator">=</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token parameter">state</span> <span class="token operator">=&gt;</span>
    <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">goodList</span><span class="token operator">:</span> state<span class="token punctuation">.</span>goodList <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token function">memo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> goodList<span class="token punctuation">,</span> dispatch<span class="token punctuation">,</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;goodList&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>Select placeholder<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&#39;请选择&#39;</span><span class="token punctuation">}</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token literal-property property">marginRight</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setSeivceId</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>
            goodList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>Option key<span class="token operator">=</span><span class="token punctuation">{</span>index <span class="token operator">+</span> <span class="token string">&#39;asd&#39;</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>itemId<span class="token punctuation">}</span> value<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>itemId<span class="token punctuation">}</span> <span class="token operator">&gt;</span> <span class="token punctuation">{</span>item<span class="token punctuation">.</span>itemName<span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token operator">/</span>Option<span class="token operator">&gt;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Select<span class="token operator">&gt;</span>
    <span class="token comment">/* 判断之前的goodList 和新的goodList 是否相等，如果相等，
    则不更新此组件 这样就可以制定属于自己的渲染约定 ，让组件只有满足预定的下才重新渲染 */</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">pre<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">is</span><span class="token punctuation">(</span>pre<span class="token punctuation">.</span>goodList<span class="token punctuation">,</span> next<span class="token punctuation">.</span>goodList<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><ul><li><p><code>useMemo</code>的应用理念和<code>memo</code>差不多，都是判定是否满足当前的限定条件来决定是否执行<code>useMemo</code>的<code>callback</code>函数，而<code>useMemo</code>的第二个参数是一个<code>deps</code>数组，数组里的参数变化决定了<code>useMemo</code>是否更新回调函数，<code>useMemo</code>返回值就是经过判定更新的结果。</p></li><li><p>它可以应用在元素上，应用在组件上，也可以应用在上下文当中。如果又一个循环的<code>list</code>元素，那么<code>useMemo</code>会是一个不二选择，接下来一起探寻一下<code>useMemo</code>的优点</p></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/* 用 useMemo包裹的list可以限定当且仅当list改变的时候才更新此list，这样就可以避免selectList重新循环 */</span>
 <span class="token punctuation">{</span><span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>
          selectList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">i<span class="token punctuation">,</span> v</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
              <span class="token operator">&lt;</span>span
                  className<span class="token operator">=</span><span class="token punctuation">{</span>style<span class="token punctuation">.</span>listSpan<span class="token punctuation">}</span>
                  key<span class="token operator">=</span><span class="token punctuation">{</span>v<span class="token punctuation">}</span> <span class="token operator">&gt;</span>
                  <span class="token punctuation">{</span>i<span class="token punctuation">.</span>patentName<span class="token punctuation">}</span> 
              <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
          <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>selectList<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>1 useMemo可以减少不必要的循环，减少不必要的渲染</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Modal
        width<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&#39;70%&#39;</span><span class="token punctuation">}</span>
        visible<span class="token operator">=</span><span class="token punctuation">{</span>listshow<span class="token punctuation">}</span>
        footer<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>
            <span class="token operator">&lt;</span>Button key<span class="token operator">=</span><span class="token string">&quot;back&quot;</span> <span class="token operator">&gt;</span>取消<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span><span class="token punctuation">,</span>
            <span class="token operator">&lt;</span>Button
                key<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span>
                type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span>
             <span class="token operator">&gt;</span>
                确定
            <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
        <span class="token punctuation">]</span><span class="token punctuation">}</span>
    <span class="token operator">&gt;</span> 
     <span class="token punctuation">{</span> <span class="token comment">/* 减少了PatentTable组件的渲染 */</span> <span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>PatentTable
            getList<span class="token operator">=</span><span class="token punctuation">{</span>getList<span class="token punctuation">}</span>
            selectList<span class="token operator">=</span><span class="token punctuation">{</span>selectList<span class="token punctuation">}</span>
            cacheSelectList<span class="token operator">=</span><span class="token punctuation">{</span>cacheSelectList<span class="token punctuation">}</span>
            setCacheSelectList<span class="token operator">=</span><span class="token punctuation">{</span>setCacheSelectList<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Modal<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>listshow<span class="token punctuation">,</span> cacheSelectList<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p><strong>2 useMemo可以减少子组件的渲染次数</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">DemoUseMemo</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token comment">/* 用useMemo 包裹之后的log函数可以避免了每次组件更新再重新声明 ，可以限制上下文的执行 */</span>
    <span class="token keyword">const</span> newLog <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token function-variable function">log</span> <span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">6666</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> log
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token function">newLog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>3 <code>useMemo</code>让函数在某个依赖项改变的时候才运行，这可以避免很多不必要的开销（这里要注意⚠️⚠️⚠️的是如果被<code>useMemo</code>包裹起来的上下文,形成一个独立的<code>闭包</code>，会缓存之前的<code>state</code>值,如果没有加相关的更新条件，是获取不到更新之后的<code>state</code>的值的，如下边👇⬇️）</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">DemoUseMemo</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span> number <span class="token punctuation">,</span>setNumber <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> newLog <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token function-variable function">log</span> <span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token comment">/* 点击span之后 打印出来的number 不是实时更新的number值 */</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> log
      <span class="token comment">/* [] 没有 number */</span>  
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token function">newLog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">&gt;</span>打印<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>span onClick<span class="token operator">=</span><span class="token punctuation">{</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token function">setNumber</span><span class="token punctuation">(</span> number <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">)</span>  <span class="token punctuation">}</span> <span class="token operator">&gt;</span>增加<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong><code>useMemo</code>很不错，<code>react-redux</code> 用<code>react-hooks</code>重写后运用了大量的<code>useMemo</code>情景，为大家分析两处</strong></p><p><code>useMemo</code> 通过 <code>store</code> <code>didStoreComeFromProps</code> <code>contextValue</code> 属性制定是否需要重置更新订阅者<code>subscription</code> ，这里就不为大家讲解<code>react-redux</code>了，有兴趣的同学可以看看<code>react-redux</code>源码，看看是怎么用<code>useMemo</code>的</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>subscription<span class="token punctuation">,</span> notifyNestedSubs<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>shouldHandleStateChanges<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token constant">NO_SUBSCRIPTION_ARRAY</span>

  <span class="token keyword">const</span> subscription <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subscription</span><span class="token punctuation">(</span>
    store<span class="token punctuation">,</span>
    didStoreComeFromProps <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> contextValue<span class="token punctuation">.</span>subscription <span class="token comment">// old </span>
  <span class="token punctuation">)</span>
  
  <span class="token keyword">const</span> notifyNestedSubs <span class="token operator">=</span> subscription<span class="token punctuation">.</span><span class="token function">notifyNestedSubs</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>
    subscription
  <span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">[</span>subscription<span class="token punctuation">,</span> notifyNestedSubs<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>store<span class="token punctuation">,</span> didStoreComeFromProps<span class="token punctuation">,</span> contextValue<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><blockquote><p><code>react-redux</code>通过 判断 <code>redux store</code>的改变来获取与之对应的<code>state</code></p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> previousState <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>store<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>如果应用useMemo根据依赖项合理的颗粒化的组件，能起到很棒的优化组件的作用。</strong></p><h2 id="_8-usecallback-usememo版本的回调函数" tabindex="-1"><a class="header-anchor" href="#_8-usecallback-usememo版本的回调函数" aria-hidden="true">#</a> 8 useCallback useMemo版本的回调函数</h2><hr><p>useMemo和useCallback接收的参数都是一样，都是在其依赖项发生变化后才执行，都是返回缓存的值，</p><p>区别在于</p><ul><li><p><code>useMemo</code>返回的是函数运行的结果，</p></li><li><p><code>useCallback</code>返回的是函数，这个回调函数是经过处理后的也就是说父组件传递一个函数给子组件的时候，产生的问题<code>由于是无状态组件每一次都会重新生成新的props函数，这样就使得每一次传递给子组件的函数都发生了变化，这时候就会触发子组件的更新</code>，这些更新是没有必要的，此时就可以通过<code>usecallback</code>来处理此函数，然后作为props传递给子组件</p></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/* 用react.memo */</span>
<span class="token keyword">const</span> DemoChildren <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
   <span class="token comment">/* 只有初始化的时候打印了 子组件更新 */</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;子组件更新&#39;</span><span class="token punctuation">)</span>
   <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
       props<span class="token punctuation">.</span><span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token string">&#39;子组件&#39;</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
   <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>子组件<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">DemoUseCallback</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> id <span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>number<span class="token punctuation">,</span> setNumber<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token comment">/* 此时usecallback的第一参数 (sonName)=&gt;{ console.log(sonName) }
     经过处理赋值给 getInfo */</span>
    <span class="token keyword">const</span> getInfo  <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">sonName</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sonName<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* 点击按钮触发父组件更新 ，但是子组件没有更新 */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token function">setNumber</span><span class="token punctuation">(</span>number<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token operator">&gt;</span>增加<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>DemoChildren getInfo<span class="token operator">=</span><span class="token punctuation">{</span>getInfo<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p><strong>这里应该提醒的是，useCallback ，必须配合 react.memo pureComponent ，否则不但不会提升性能，还有可能降低性能</strong></p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: suiyi19920228@qq.com">sykinggg</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/technology/assets/app.b05da4ec.js" defer></script>
  </body>
</html>
